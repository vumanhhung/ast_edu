'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var JSZip = _interopDefault(require('jszip/dist/jszip'));

var current = {
    compile: function(template) {
        return template;
    }
};

var TemplateService = function TemplateService () {};

TemplateService.register = function register (userImplementation) {
    current = userImplementation;
};

TemplateService.compile = function compile (template) {
    return current.compile(template);
};

var FIELD_REGEX = /\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;
var getterCache = {};
var UNDEFINED = 'undefined';

getterCache[UNDEFINED] = function(obj) {
    return obj;
};

function getter(field) {
    if (getterCache[field]) {
        return getterCache[field];
    }

    var fields = [];
    field.replace(FIELD_REGEX, function(match, index, indexAccessor, field) {
        fields.push(typeof index !== UNDEFINED ? index : (indexAccessor || field));
    });

    getterCache[field] = function(obj) {
        var result = obj;
        for (var idx = 0; idx < fields.length && result; idx++) {
            result = result[fields[idx]];
        }

        return result;
    };

    return getterCache[field];
}

function map(array, func) {
    return array.reduce(function (result, el, i) {
        var val = func(el, i);
        if (val != null) {
            result.push(val);
        }
        return result;
    }, []);
}

function defaultGroupHeaderTemplate(data) {
    return ((data.title) + ": " + (data.value));
}

function createArray(length, callback) {
    var result = [];

    for (var idx = 0; idx < length; idx++) {
        result.push(callback(idx));
    }

    return result;
}

var ExcelExporter = function ExcelExporter(options) {
    options.columns = this._trimColumns(options.columns || []);

    this.allColumns = map(this._leafColumns(options.columns || []), this._prepareColumn);

    this.columns = this.allColumns.filter(function(column) { return !column.hidden; });

    this.options = options;
    this.data = options.data || [];
    this.aggregates = options.aggregates || {};
    this.groups = [].concat(options.groups || []);
    this.hierarchy = options.hierarchy;
};

ExcelExporter.prototype.workbook = function workbook () {
    var workbook = {
        sheets: [ {
            columns: this._columns(),
            rows: this.hierarchy ? this._hierachyRows() : this._rows(),
            freezePane: this._freezePane(),
            filter: this._filter()
        } ]
    };

    return workbook;
};

ExcelExporter.prototype._trimColumns = function _trimColumns (columns) {
        var this$1 = this;

    return columns.filter(function (column) {
        var result = Boolean(column.field);

        if (!result && column.columns) {
            result = this$1._trimColumns(column.columns).length > 0;
        }

        return result;
    });
};

ExcelExporter.prototype._leafColumns = function _leafColumns (columns) {
        var this$1 = this;

    var result = [];

    for (var idx = 0; idx < columns.length; idx++) {
        if (!columns[idx].columns) {
            result.push(columns[idx]);
        } else {
            result = result.concat(this$1._leafColumns(columns[idx].columns));
        }
    }

    return result;
};

ExcelExporter.prototype._prepareColumn = function _prepareColumn (column) {
    if (!column.field) {
        return null;
    }

    var value = function(dataItem) {
        return getter(column.field)(dataItem);
    };

    var values = null;

    if (column.values) {
        values = {};

        column.values.forEach(function(item) {
            values[item.value] = item.text;
        });

        value = function(dataItem) {
            return values[getter(column.field)(dataItem)];
        };
    }

    return Object.assign({}, column, {
        value: value,
        values: values,
        groupHeaderTemplate: column.groupHeaderTemplate ? TemplateService.compile(column.groupHeaderTemplate) : defaultGroupHeaderTemplate,
        groupFooterTemplate: column.groupFooterTemplate ? TemplateService.compile(column.groupFooterTemplate) : null,
        footerTemplate: column.footerTemplate ? TemplateService.compile(column.footerTemplate) : null
    });
};

ExcelExporter.prototype._filter = function _filter () {
    if (!this.options.filterable) {
        return null;
    }

    var depth = this._depth();

    return {
        from: depth,
        to: depth + this.columns.length - 1
    };
};

ExcelExporter.prototype._createPaddingCells = function _createPaddingCells (length) {
        var this$1 = this;

    return createArray(length, function () { return Object.assign({
        background: "#dfdfdf",
        color: "#333"
    }, this$1.options.paddingCellOptions); });
};

ExcelExporter.prototype._dataRow = function _dataRow (dataItem, level, depth) {
        var this$1 = this;

    var cells = this._createPaddingCells(level);

    // grouped
    if (depth && dataItem.items) {
        var column = this.allColumns.filter(function(column) {
            return column.field === dataItem.field;
        })[0];

        var title = column && column.title ? column.title : dataItem.field;
        var template = column ? column.groupHeaderTemplate : null;
        var group = Object.assign({
            title: title,
            field: dataItem.field,
            value: column && column.values ? column.values[dataItem.value] : dataItem.value,
            aggregates: dataItem.aggregates,
            items: dataItem.items
        }, dataItem.aggregates[dataItem.field]);

        var value = title + ": " + (dataItem.value);

        if (template) {
            value = template(group);
        }

        cells.push(Object.assign({
            value: value,
            background: "#dfdfdf",
            color: "#333",
            colSpan: this.columns.length + depth - level
        }, (column || {}).groupHeaderCellOptions));

        var rows = this._dataRows(dataItem.items, level + 1);

        rows.unshift({
            type: "group-header",
            cells: cells
        });

        return rows.concat(this._footer(dataItem));
    }

    var dataCells = [];

    for (var cellIdx = 0; cellIdx < this.columns.length; cellIdx++) {
        dataCells[cellIdx] = this$1._cell(dataItem, this$1.columns[cellIdx]);
    }

    if (this.hierarchy) {
        dataCells[0].colSpan = depth - level + 1;
    }

    return [ {
        type: "data",
        cells: cells.concat(dataCells)
    } ];
};

ExcelExporter.prototype._dataRows = function _dataRows (dataItems, level) {
        var this$1 = this;

    var depth = this._depth();
    var rows = [];

    for (var idx = 0; idx < dataItems.length; idx++) {
        rows.push.apply(rows, this$1._dataRow(dataItems[idx], level, depth));
    }

    return rows;
};

ExcelExporter.prototype._hierachyRows = function _hierachyRows () {
        var this$1 = this;

    var depth = this._depth();
    var data = this.data;
    var itemLevel = this.hierarchy.itemLevel;
    var hasFooter = this._hasFooterTemplate();
    var rows = [];
    var parents = [];
    var previousLevel = 0;
    var previousItemId;

    for (var idx = 0; idx < data.length; idx++) {
        var item = data[idx];
        var level = itemLevel(item);

        if (hasFooter) {
            if (level > previousLevel) {
                parents.push({ id: previousItemId, level: previousLevel });
            } else if (level < previousLevel) {
                rows.push.apply(rows, this$1._hierarchyFooterRows(parents, level, depth));
            }

            previousLevel = level;
            previousItemId = item.id;
        }

        rows.push.apply(rows, this$1._dataRow(item, level + 1, depth));
    }

    if (hasFooter) {
        rows.push.apply(rows, this._hierarchyFooterRows(parents, 0, depth));

        var rootAggregate = data.length ? this.aggregates[data[0].parentId] : {};
        rows.push(this._hierarchyFooter(rootAggregate, 0, depth));
    }

    this._prependHeaderRows(rows);

    return rows;
};

ExcelExporter.prototype._hierarchyFooterRows = function _hierarchyFooterRows (parents, currentLevel, depth) {
        var this$1 = this;

    var rows = [];
    while (parents.length && parents[parents.length - 1].level >= currentLevel) {
        var parent = parents.pop();
        rows.push(this$1._hierarchyFooter(this$1.aggregates[parent.id], parent.level + 1, depth));
    }

    return rows;
};

ExcelExporter.prototype._hasFooterTemplate = function _hasFooterTemplate () {
    var columns = this.columns;
    for (var idx = 0; idx < columns.length; idx++) {
        if (columns[idx].footerTemplate) {
            return true;
        }
    }
};

ExcelExporter.prototype._hierarchyFooter = function _hierarchyFooter (aggregates, level, depth) {
    var cells = this.columns.map(function(column, index) {
        var colSpan = index ? 1 : depth - level + 1;
        if (column.footerTemplate) {
            return Object.assign({
                background: "#dfdfdf",
                color: "#333",
                colSpan: colSpan,
                value: column.footerTemplate(Object.assign({}, (aggregates || {})[column.field]))
            }, column.footerCellOptions);
        }

        return Object.assign({
            background: "#dfdfdf",
            color: "#333",
            colSpan: colSpan
        }, column.footerCellOptions);
    });

    return {
        type: "footer",
        cells: this._createPaddingCells(level).concat(cells)
    };
};

ExcelExporter.prototype._footer = function _footer (dataItem) {
        var this$1 = this;

    var rows = [];
    var footer = false;

    var cells = this.columns.map(function (column) {
        if (column.groupFooterTemplate) {
            var templateData = Object.assign({}, this$1.aggregates, dataItem.aggregates, dataItem.aggregates[column.field], {
                group: {
                    items: dataItem.items,
                    field: dataItem.field,
                    value: dataItem.value
                }
            });

            // https://github.com/telerik/kendo-ui-core/issues/3024
            // https://github.com/telerik/kendo-ui-core/issues/3095
            templateData[dataItem.field] = templateData;

            footer = true;
            return Object.assign({
                background: "#dfdfdf",
                color: "#333",
                value: column.groupFooterTemplate(templateData)
            }, column.groupFooterCellOptions);
        }

        return Object.assign({
            background: "#dfdfdf",
            color: "#333"
        }, column.groupFooterCellOptions);
    });

    if (footer) {
        rows.push({
            type: "group-footer",
            cells: this._createPaddingCells(this.groups.length).concat(cells)
        });
    }

    return rows;
};

ExcelExporter.prototype._isColumnVisible = function _isColumnVisible (column) {
    return this._visibleColumns([ column ]).length > 0 && (column.field || column.columns);
};

ExcelExporter.prototype._visibleColumns = function _visibleColumns (columns) {
        var this$1 = this;

    return columns.filter(function (column) {
        var result = !column.hidden;
        if (result && column.columns) {
            result = this$1._visibleColumns(column.columns).length > 0;
        }
        return result;
    });
};

ExcelExporter.prototype._headerRow = function _headerRow (row, groups) {
        var this$1 = this;

    var headers = row.cells.map(function(cell) {
        return Object.assign(cell, {
            colSpan: cell.colSpan > 1 ? cell.colSpan : 1,
            rowSpan: row.rowSpan > 1 && !cell.colSpan ? row.rowSpan : 1
        });
    });

    if (this.hierarchy) {
        headers[0].colSpan = this._depth() + 1;
    }

    return {
        type: "header",
        cells: createArray(groups.length, function () { return Object.assign({
            background: "#7a7a7a",
            color: "#fff"
        }, this$1.options.headerPaddingCellOptions); }).concat(headers)
    };
};

ExcelExporter.prototype._prependHeaderRows = function _prependHeaderRows (rows) {
        var this$1 = this;

    var groups = this.groups;

    var headerRows = [ { rowSpan: 1, cells: [], index: 0 } ];

    this._prepareHeaderRows(headerRows, this.options.columns);

    for (var idx = headerRows.length - 1; idx >= 0; idx--) {
        rows.unshift(this$1._headerRow(headerRows[idx], groups));
    }
};

ExcelExporter.prototype._prepareHeaderRows = function _prepareHeaderRows (rows, columns, parentCell, parentRow) {
        var this$1 = this;

    var row = parentRow || rows[rows.length - 1];
    var childRow = rows[row.index + 1];
    var totalColSpan = 0;

    for (var idx = 0; idx < columns.length; idx++) {
        var column = columns[idx];
        if (this$1._isColumnVisible(column)) {

            var cell = Object.assign({
                background: "#7a7a7a",
                color: "#fff",
                value: column.title || column.field,
                colSpan: 0
            }, column.headerCellOptions);
            row.cells.push(cell);

            if (column.columns && column.columns.length) {
                if (!childRow) {
                    childRow = { rowSpan: 0, cells: [], index: rows.length };
                    rows.push(childRow);
                }
                cell.colSpan = this$1._trimColumns(this$1._visibleColumns(column.columns)).length;
                this$1._prepareHeaderRows(rows, column.columns, cell, childRow);
                totalColSpan += cell.colSpan - 1;
                row.rowSpan = rows.length - row.index;
            }
        }
    }

    if (parentCell) {
        parentCell.colSpan += totalColSpan;
    }
};

ExcelExporter.prototype._rows = function _rows () {
        var this$1 = this;

    var rows = this._dataRows(this.data, 0);

    if (this.columns.length) {
        this._prependHeaderRows(rows);
        var footer = false;

        var cells = this.columns.map(function (column) {
            if (column.footerTemplate) {
                footer = true;

                return Object.assign({
                    background: "#dfdfdf",
                    color: "#333",
                    value: column.footerTemplate(Object.assign({}, this$1.aggregates, this$1.aggregates[column.field]))
                }, column.footerCellOptions);
            }

            return Object.assign({
                background: "#dfdfdf",
                color: "#333"
            }, column.footerCellOptions);
        });

        if (footer) {
            rows.push({
                type: "footer",
                cells: this._createPaddingCells(this.groups.length).concat(cells)
            });
        }
    }

    return rows;
};

ExcelExporter.prototype._headerDepth = function _headerDepth (columns) {
        var this$1 = this;

    var result = 1;
    var max = 0;

    for (var idx = 0; idx < columns.length; idx++) {
        if (columns[idx].columns) {
            var temp = this$1._headerDepth(columns[idx].columns);
            if (temp > max) {
                max = temp;
            }
        }
    }
    return result + max;
};

ExcelExporter.prototype._freezePane = function _freezePane () {
    var columns = this._visibleColumns(this.options.columns || []);

    var colSplit = this._visibleColumns(this._trimColumns(this._leafColumns(columns.filter(function(column) {
        return column.locked;
    })))).length;

    return {
        rowSplit: this._headerDepth(columns),
        colSplit: colSplit ? colSplit + this.groups.length : 0
    };
};

ExcelExporter.prototype._cell = function _cell (dataItem, column) {
    return Object.assign({
        value: column.value(dataItem)
    }, column.cellOptions);
};

ExcelExporter.prototype._depth = function _depth () {
    var depth = 0;

    if (this.hierarchy) {
        depth = this.hierarchy.depth;
    } else {
        depth = this.groups.length;
    }

    return depth;
};

ExcelExporter.prototype._columns = function _columns () {
    var depth = this._depth();
    var columns = createArray(depth, function () { return ({ width: 20 }); });

    return columns.concat(this.columns.map(function(column) {
        return {
            width: parseInt(column.width, 10),
            autoWidth: column.width ? false : true
        };
    }));
};

var current$1 = {
    toString: function (value) { return value; }
};

var IntlService = function IntlService () {};

IntlService.register = function register (userImplementation) {
    current$1 = userImplementation;
};

IntlService.toString = function toString (value, format) {
    return current$1.toString(value, format);
};

function createZip() {
    return new JSZip();
}

var DATA_URL_PREFIX = "data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,";
var DATA_URL_OPTIONS = { compression: "DEFLATE", type: "base64" };
var MS_PER_MINUTE = 60000;
var MS_PER_DAY = 86400000;

/* eslint-disable key-spacing, no-arrow-condition, indent, no-nested-ternary, consistent-return */

function toDataURL(content) {
    return DATA_URL_PREFIX + content;
}

function indexOf(thing, array) {
    return array.indexOf(thing);
}

var parseJSON = JSON.parse.bind(JSON);

function ESC(val) {
    return String(val)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\"/g, "&quot;")
        .replace(/\'/g, "&#39;");
}

function repeat(count, func) {
    var str = "";
    for (var i = 0; i < count; ++i) {
        str += func(i);
    }
    return str;
}

function foreach(arr, func) {
    var str = "";
    for (var i = 0; i < arr.length; ++i) {
        str += func(arr[i], i);
    }
    return str;
}

var XMLHEAD = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r';

var RELS = XMLHEAD + "\n            <Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n               <Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/>\n               <Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/>\n               <Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/>\n            </Relationships>";

var CORE = function (ref) {
  var creator = ref.creator;
  var lastModifiedBy = ref.lastModifiedBy;
  var created = ref.created;
  var modified = ref.modified;

  return (XMLHEAD + "\n <cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\"\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\"\n   xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n   <dc:creator>" + (ESC(creator)) + "</dc:creator>\n   <cp:lastModifiedBy>" + (ESC(lastModifiedBy)) + "</cp:lastModifiedBy>\n   <dcterms:created xsi:type=\"dcterms:W3CDTF\">" + (ESC(created)) + "</dcterms:created>\n   <dcterms:modified xsi:type=\"dcterms:W3CDTF\">" + (ESC(modified)) + "</dcterms:modified>\n</cp:coreProperties>");
};

var APP = function (ref) {
  var sheets = ref.sheets;

  return (XMLHEAD + "\n<Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\">\n  <Application>Microsoft Excel</Application>\n  <DocSecurity>0</DocSecurity>\n  <ScaleCrop>false</ScaleCrop>\n  <HeadingPairs>\n    <vt:vector size=\"2\" baseType=\"variant\">\n      <vt:variant>\n        <vt:lpstr>Worksheets</vt:lpstr>\n      </vt:variant>\n      <vt:variant>\n        <vt:i4>" + (sheets.length) + "</vt:i4>\n      </vt:variant>\n    </vt:vector>\n  </HeadingPairs>\n  <TitlesOfParts>\n    <vt:vector size=\"" + (sheets.length) + "\" baseType=\"lpstr\">" + (foreach(sheets, function (sheet, i) { return sheet.options.title
          ? ("<vt:lpstr>" + (ESC(sheet.options.title)) + "</vt:lpstr>")
          : ("<vt:lpstr>Sheet" + (i + 1) + "</vt:lpstr>"); }
      )) + "</vt:vector>\n  </TitlesOfParts>\n  <LinksUpToDate>false</LinksUpToDate>\n  <SharedDoc>false</SharedDoc>\n  <HyperlinksChanged>false</HyperlinksChanged>\n  <AppVersion>14.0300</AppVersion>\n</Properties>");
};

var CONTENT_TYPES = function (ref) {
  var count = ref.count;

  return (XMLHEAD + "\n<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\">\n  <Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\" />\n  <Default Extension=\"xml\" ContentType=\"application/xml\" />\n  <Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\" />\n  <Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/>\n  <Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>\n  " + (repeat(count, function (idx) { return ("<Override PartName=\"/xl/worksheets/sheet" + (idx + 1) + ".xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\" />"); })) + "\n  <Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\" />\n  <Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\" />\n</Types>");
};

var WORKBOOK = function (ref) {
  var sheets = ref.sheets;
  var filterNames = ref.filterNames;
  var userNames = ref.userNames;

  return (XMLHEAD + "\n<workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">\n  <fileVersion appName=\"xl\" lastEdited=\"5\" lowestEdited=\"5\" rupBuild=\"9303\" />\n  <workbookPr defaultThemeVersion=\"124226\" />\n  <bookViews>\n    <workbookView xWindow=\"240\" yWindow=\"45\" windowWidth=\"18195\" windowHeight=\"7995\" />\n  </bookViews>\n  <sheets>\n  " + (foreach(sheets, function (ref, i) {
    var options = ref.options;

    var name = options.name || options.title || ("Sheet" + (i + 1));
    return ("<sheet name=\"" + (ESC(name)) + "\" sheetId=\"" + (i + 1) + "\" r:id=\"rId" + (i + 1) + "\" />");
  })) + "\n  </sheets>\n  " + (filterNames.length || userNames.length ? ("\n    <definedNames>\n      " + (foreach(filterNames, function (f) { return ("\n         <definedName name=\"_xlnm._FilterDatabase\" hidden=\"1\" localSheetId=\"" + (f.localSheetId) + "\">" + (ESC(f.name)) + "!" + (ESC(f.from)) + ":" + (ESC(f.to)) + "</definedName>"); })) + "\n      " + (foreach(userNames, function (f) { return ("\n         <definedName name=\"" + (f.name) + "\" hidden=\"" + (f.hidden ? 1 : 0) + "\" " + (f.localSheetId != null ? ("localSheetId=\"" + (f.localSheetId) + "\"") : '') + ">" + (ESC(f.value)) + "</definedName>"); })) + "\n    </definedNames>") : '') + "\n  <calcPr fullCalcOnLoad=\"1\" calcId=\"145621\" />\n</workbook>");
};

var WORKSHEET = function (ref) {
  var frozenColumns = ref.frozenColumns;
  var frozenRows = ref.frozenRows;
  var columns = ref.columns;
  var defaults = ref.defaults;
  var data = ref.data;
  var index = ref.index;
  var mergeCells = ref.mergeCells;
  var autoFilter = ref.autoFilter;
  var filter = ref.filter;
  var showGridLines = ref.showGridLines;
  var hyperlinks = ref.hyperlinks;
  var validations = ref.validations;
  var defaultCellStyleId = ref.defaultCellStyleId;
  var rtl = ref.rtl;

  return (XMLHEAD + "\n<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\" mc:Ignorable=\"x14ac\">\n   <dimension ref=\"A1\" />\n\n   <sheetViews>\n     <sheetView " + (rtl ? 'rightToLeft="1"' : '') + " " + (index === 0 ? 'tabSelected="1"' : '') + " workbookViewId=\"0\" " + (showGridLines === false ? 'showGridLines="0"' : '') + ">\n     " + (frozenRows || frozenColumns ? ("\n       <pane state=\"frozen\"\n         " + (frozenColumns ? ("xSplit=\"" + frozenColumns + "\"") : '') + "\n         " + (frozenRows ? ("ySplit=\"" + frozenRows + "\"") : '') + "\n         topLeftCell=\"" + (String.fromCharCode(65 + (frozenColumns || 0)) + ((frozenRows || 0) + 1)) + "\"\n       />") : '') + "\n     </sheetView>\n   </sheetViews>\n\n   <sheetFormatPr x14ac:dyDescent=\"0.25\" defaultRowHeight=\"" + (defaults.rowHeight ? defaults.rowHeight * 0.75 : 15) + "\"\n     " + (defaults.columnWidth ? ("defaultColWidth=\"" + (toWidth(defaults.columnWidth)) + "\"") : '') + " />\n\n   " + (defaultCellStyleId != null || (columns && columns.length > 0) ? ("\n     <cols>\n       " + (!columns || !columns.length ? ("\n         <col min=\"1\" max=\"16384\" style=\"" + defaultCellStyleId + "\"\n              " + (defaults.columnWidth ? ("width=\"" + (toWidth(defaults.columnWidth)) + "\"") : '') + " /> ") : '') + "\n       " + (foreach(columns, function (column, ci) {
         var columnIndex = typeof column.index === "number" ? column.index + 1 : (ci + 1);
         if (column.width === 0) {
           return ("<col " + (defaultCellStyleId != null ? ("style=\"" + defaultCellStyleId + "\"") : '') + "\n                        min=\"" + columnIndex + "\" max=\"" + columnIndex + "\" hidden=\"1\" customWidth=\"1\" />");
         }
         return ("<col " + (defaultCellStyleId != null ? ("style=\"" + defaultCellStyleId + "\"") : '') + "\n                      min=\"" + columnIndex + "\" max=\"" + columnIndex + "\" customWidth=\"1\"\n                      " + (column.autoWidth
                          ? ("width=\"" + (((column.width * 7 + 5) / 7 * 256) / 256) + "\" bestFit=\"1\"")
                          : ("width=\"" + (toWidth(column.width)) + "\"")) + " />");
       })) + "\n     </cols>") : '') + "\n\n   <sheetData>\n     " + (foreach(data, function (row, ri) {
       var rowIndex = typeof row.index === "number" ? row.index + 1 : (ri + 1);
       return ("\n         <row r=\"" + rowIndex + "\" x14ac:dyDescent=\"0.25\"\n              " + (row.height === 0 ? 'hidden="1"'
                                 : row.height ? ("ht=\"" + (toHeight(row.height)) + "\" customHeight=\"1\"") : "") + ">\n           " + (foreach(row.data, function (cell) { return ("\n             <c r=\"" + (cell.ref) + "\" " + (cell.style ? ("s=\"" + (cell.style) + "\"") : '') + " " + (cell.type ? ("t=\"" + (cell.type) + "\"") : '') + ">\n               " + (cell.formula != null ? writeFormula(cell.formula) : '') + "\n               " + (cell.value != null ? ("<v>" + (ESC(cell.value)) + "</v>") : '') + "\n             </c>"); })) + "\n         </row>\n       ");})) + "\n   </sheetData>\n\n   " + (autoFilter ? ("<autoFilter ref=\"" + (autoFilter.from) + ":" + (autoFilter.to) + "\"/>")
                : filter ? spreadsheetFilters(filter) : '') + "\n\n   " + (mergeCells.length ? ("\n     <mergeCells count=\"" + (mergeCells.length) + "\">\n       " + (foreach(mergeCells, function (ref) { return ("<mergeCell ref=\"" + ref + "\"/>"); })) + "\n     </mergeCells>") : '') + "\n\n   " + (validations.length ? ("\n     <dataValidations>\n       " + (foreach(validations, function (val) { return ("\n         <dataValidation sqref=\"" + (val.sqref.join(" ")) + "\"\n                         showErrorMessage=\"" + (val.showErrorMessage) + "\"\n                         type=\"" + (ESC(val.type)) + "\"\n                         " + (val.type !== "list" ? ("operator=\"" + (ESC(val.operator)) + "\"") : '') + "\n                         allowBlank=\"" + (val.allowBlank) + "\"\n                         showDropDown=\"" + (val.showDropDown) + "\"\n                         " + (val.error ? ("error=\"" + (ESC(val.error)) + "\"") : '') + "\n                         " + (val.errorTitle ? ("errorTitle=\"" + (ESC(val.errorTitle)) + "\"") : '') + ">\n           " + (val.formula1 ? ("<formula1>" + (ESC(val.formula1)) + "</formula1>") : '') + "\n           " + (val.formula2 ? ("<formula2>" + (ESC(val.formula2)) + "</formula2>") : '') + "\n         </dataValidation>"); })) + "\n     </dataValidations>") : '') + "\n\n   " + (hyperlinks.length ? ("\n     <hyperlinks>\n       " + (foreach(hyperlinks, function (link, hi) { return ("\n         <hyperlink ref=\"" + (link.ref) + "\" r:id=\"rId" + hi + "\"/>"); })) + "\n     </hyperlinks>") : '') + "\n\n   <pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\" />\n</worksheet>");
};

var WORKBOOK_RELS = function (ref) {
  var count = ref.count;

  return (XMLHEAD + "\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n  " + (repeat(count, function (idx) { return ("\n    <Relationship Id=\"rId" + (idx + 1) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet" + (idx + 1) + ".xml\" />"); })) + "\n  <Relationship Id=\"rId" + (count + 1) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\" />\n  <Relationship Id=\"rId" + (count + 2) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\" />\n</Relationships>");
};

var WORKSHEET_RELS = function (ref) {
  var hyperlinks = ref.hyperlinks;

  return (XMLHEAD + "\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n  " + (foreach(hyperlinks, function (link, i) { return ("\n    <Relationship Id=\"rId" + i + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink\" Target=\"" + (ESC(link.target)) + "\" TargetMode=\"External\" />"); })) + "\n</Relationships>");
};

var SHARED_STRINGS = function (ref) {
  var count = ref.count;
  var uniqueCount = ref.uniqueCount;
  var indexes = ref.indexes;

  return (XMLHEAD + "\n<sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" count=\"" + count + "\" uniqueCount=\"" + uniqueCount + "\">\n  " + (foreach(Object.keys(indexes), function (index) { return ("\n    <si><t xml:space=\"preserve\">" + (ESC(index.substring(1))) + "</t></si>"); })) + "\n</sst>");
};

var STYLES = function (ref) {
  var formats = ref.formats;
  var fonts = ref.fonts;
  var fills = ref.fills;
  var borders = ref.borders;
  var styles = ref.styles;

  return (XMLHEAD + "\n<styleSheet\n    xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    mc:Ignorable=\"x14ac\"\n    xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">\n  <numFmts count=\"" + (formats.length) + "\">\n  " + (foreach(formats, function (format, fi) { return ("\n    <numFmt formatCode=\"" + (ESC(format.format)) + "\" numFmtId=\"" + (165 + fi) + "\" />"); })) + "\n  </numFmts>\n  <fonts count=\"" + (fonts.length + 1) + "\" x14ac:knownFonts=\"1\">\n    <font>\n       <sz val=\"11\" />\n       <color theme=\"1\" />\n       <name val=\"Calibri\" />\n       <family val=\"2\" />\n       <scheme val=\"minor\" />\n    </font>\n    " + (foreach(fonts, function (font) { return ("\n    <font>\n      <sz val=\"" + (font.fontSize || 11) + "\" />\n      " + (font.bold ? '<b/>' : '') + "\n      " + (font.italic ? '<i/>' : '') + "\n      " + (font.underline ? '<u/>' : '') + "\n      " + (font.color ? ("<color rgb=\"" + (ESC(font.color)) + "\" />") : '<color theme="1" />') + "\n      " + (font.fontFamily ? ("\n        <name val=\"" + (ESC(font.fontFamily)) + "\" />\n        <family val=\"2\" />\n      ") : "\n        <name val=\"Calibri\" />\n        <family val=\"2\" />\n        <scheme val=\"minor\" />\n      ") + "\n    </font>"); })) + "\n  </fonts>\n  <fills count=\"" + (fills.length + 2) + "\">\n      <fill><patternFill patternType=\"none\"/></fill>\n      <fill><patternFill patternType=\"gray125\"/></fill>\n    " + (foreach(fills, function (fill) { return ("\n      " + (fill.background ? ("\n        <fill>\n          <patternFill patternType=\"solid\">\n              <fgColor rgb=\"" + (ESC(fill.background)) + "\"/>\n          </patternFill>\n        </fill>\n      ") : '')); })) + "\n  </fills>\n  <borders count=\"" + (borders.length + 1) + "\">\n    <border><left/><right/><top/><bottom/><diagonal/></border>\n    " + (foreach(borders, borderTemplate)) + "\n  </borders>\n  <cellStyleXfs count=\"1\">\n    <xf borderId=\"0\" fillId=\"0\" fontId=\"0\" />\n  </cellStyleXfs>\n  <cellXfs count=\"" + (styles.length + 1) + "\">\n    <xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\" />\n    " + (foreach(styles, function (style) { return ("\n      <xf xfId=\"0\"\n          " + (style.fontId ? ("fontId=\"" + (style.fontId) + "\" applyFont=\"1\"") : '') + "\n          " + (style.fillId ? ("fillId=\"" + (style.fillId) + "\" applyFill=\"1\"") : '') + "\n          " + (style.numFmtId ? ("numFmtId=\"" + (style.numFmtId) + "\" applyNumberFormat=\"1\"") : '') + "\n          " + (style.textAlign || style.verticalAlign || style.wrap ? 'applyAlignment="1"' : '') + "\n          " + (style.borderId ? ("borderId=\"" + (style.borderId) + "\" applyBorder=\"1\"") : '') + ">\n        " + (style.textAlign || style.verticalAlign || style.wrap ? ("\n        <alignment\n          " + (style.textAlign ? ("horizontal=\"" + (ESC(style.textAlign)) + "\"") : '') + "\n          " + (style.verticalAlign ? ("vertical=\"" + (ESC(style.verticalAlign)) + "\"") : '') + "\n          " + (style.wrap ? 'wrapText="1"' : '') + " />\n        ") : '') + "\n      </xf>\n    "); })) + "\n  </cellXfs>\n  <cellStyles count=\"1\">\n    <cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/>\n  </cellStyles>\n  <dxfs count=\"0\" />\n  <tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleMedium9\" />\n</styleSheet>");
};

function writeFormula(formula) {
    if (typeof formula == "string") {
        return ("<f>" + (ESC(formula)) + "</f>");
    }
    // array formulas
    return ("<f t=\"array\" ref=\"" + (formula.ref) + "\">" + (ESC(formula.src)) + "</f>");
}

function numChar(colIndex) {
   var letter = Math.floor(colIndex / 26) - 1;

   return (letter >= 0 ? numChar(letter) : "") + String.fromCharCode(65 + (colIndex % 26));
}

function ref(rowIndex, colIndex) {
    return numChar(colIndex) + (rowIndex + 1);
}

function $ref(rowIndex, colIndex) {
    return "$" + numChar(colIndex) + "$" + (rowIndex + 1);
}

function filterRowIndex(options) {
    var frozenRows = options.frozenRows || (options.freezePane || {}).rowSplit || 1;
    return frozenRows - 1;
}

function toWidth(px) {
    return ((px / 7) * 100 + 0.5) / 100;
}

function toHeight(px) {
    return px * 0.75;
}

function stripFunnyChars(value) {
    return String(value)
        .replace(/[\x00-\x08]/g, "")
        .replace(/\n/g, "\r\n");
}

var DATE_EPOCH = new Date(1900, 0, 0);

var Worksheet = function Worksheet(options, sharedStrings, styles, borders) {
      this.options = options;
      this._strings = sharedStrings;
      this._styles = styles;
      this._borders = borders;
      this._validations = {};
  };

  Worksheet.prototype.relsToXML = function relsToXML () {
      var hyperlinks = this.options.hyperlinks || [];
      if (!hyperlinks.length) {
          return "";
      }

      return WORKSHEET_RELS({ hyperlinks: hyperlinks });
  };

  Worksheet.prototype.toXML = function toXML (index) {
        var this$1 = this;

      var mergeCells = this.options.mergedCells || [];
      var rows = this.options.rows || [];
      var data = inflate(rows, mergeCells);

      this._readCells(data);

      var autoFilter = this.options.filter;
      var filter;
      if (autoFilter && (typeof autoFilter.from === "number") && (typeof autoFilter.to === "number")) {
          // Grid enables auto filter
          autoFilter = {
              from: ref(filterRowIndex(this.options), autoFilter.from),
              to: ref(filterRowIndex(this.options), autoFilter.to)
          };
      } else if (autoFilter && autoFilter.ref && autoFilter.columns) {
          // this is probably from the Spreadsheet
          filter = autoFilter;
          autoFilter = null;
      }

      var validations = [];
      for (var i in this._validations) {
          if (Object.prototype.hasOwnProperty.call(this$1._validations, i)) {
              validations.push(this$1._validations[i]);
          }
      }

      var defaultCellStyleId = null;
      if (this.options.defaultCellStyle) {
          defaultCellStyleId = this._lookupStyle(this.options.defaultCellStyle);
      }

      var freezePane = this.options.freezePane || {};
      var defaults = this.options.defaults || {};
      return WORKSHEET({
          frozenColumns: this.options.frozenColumns || freezePane.colSplit,
          frozenRows: this.options.frozenRows || freezePane.rowSplit,
          columns: this.options.columns,
          defaults: defaults,
          data: data,
          index: index,
          mergeCells: mergeCells,
          autoFilter: autoFilter,
          filter: filter,
          showGridLines: this.options.showGridLines,
          hyperlinks: this.options.hyperlinks || [],
          validations: validations,
          defaultCellStyleId: defaultCellStyleId,
          rtl: this.options.rtl !== undefined ? this.options.rtl : defaults.rtl
      });
  };

    Worksheet.prototype._lookupString = function _lookupString (value) {
        var key = "$" + value;
        var index = this._strings.indexes[key];
        var result;

        if (index !== undefined) {
            result = index;
        } else {
            result = this._strings.indexes[key] = this._strings.uniqueCount;
            this._strings.uniqueCount ++;
        }

        this._strings.count ++;

        return result;
    };

    Worksheet.prototype._lookupStyle = function _lookupStyle (style) {
        var json = JSON.stringify(style);

        if (json === "{}") {
            return 0;
        }

        var index = indexOf(json, this._styles);

        if (index < 0) {
          index = this._styles.push(json) - 1;
      }

      // There is one default style
      return index + 1;
  };

  Worksheet.prototype._lookupBorder = function _lookupBorder (border) {
      var json = JSON.stringify(border);
      if (json === "{}") {
          return;
      }

      var index = indexOf(json, this._borders);
      if (index < 0) {
          index = this._borders.push(json) - 1;
      }

      // There is one default border
      return index + 1;
  };

  Worksheet.prototype._readCells = function _readCells (rowData) {
        var this$1 = this;

      for (var i = 0; i < rowData.length; i++) {
          var row = rowData[i];
          var cells = row.cells;

          row.data = [];

          for (var j = 0; j < cells.length; j++) {
              var cellData = this$1._cell(cells[j], row.index, j);
                if (cellData) {
                    row.data.push(cellData);
                }
            }
        }
    };

    Worksheet.prototype._cell = function _cell (data, rowIndex, cellIndex) {
        if (!data || data === EMPTY_CELL) {
            return null;
        }

        var value = data.value;

        var border = {};

      if (data.borderLeft) {
          border.left = data.borderLeft;
      }

      if (data.borderRight) {
          border.right = data.borderRight;
      }

      if (data.borderTop) {
          border.top = data.borderTop;
      }

      if (data.borderBottom) {
          border.bottom = data.borderBottom;
        }

        border = this._lookupBorder(border);

      var defStyle = this.options.defaultCellStyle || {};
        var style = { borderId: border };

        (function(add) {
          add("color");
          add("background");
          add("bold");
            add("italic");
            add("underline");
            if (!add("fontFamily")) { add("fontName", "fontFamily"); }
          add("fontSize");
          add("format");
            if (!add("textAlign")) { add("hAlign", "textAlign"); }
          if (!add("verticalAlign")) { add("vAlign", "verticalAlign"); }
          add("wrap");
        })(
            function(prop, target) {
                var val = data[prop];
                if (val === undefined) {
                    val = defStyle[prop];
                }
                if (val !== undefined) {
                    style[target || prop] = val;
                    return true;
                }
            }
        );

        var columns = this.options.columns || [];

        var column = columns[cellIndex];
      var type = typeof value;

      if (column && column.autoWidth) {
          var displayValue = value;

          // XXX: let's not bring kendo.toString in only for this.
          //    better wait until the spreadsheet engine is available as a separate
          //    component, then we can use a real Excel-like formatter.
          //
          if (type === "number") {
              // kendo.toString will not behave exactly like the Excel format
                // Still, it's the best we have available for estimating the character count.
              displayValue = IntlService.toString(value, data.format);
          }

          column.width = Math.max(column.width || 0, String(displayValue).length);
      }

      if (type === "string") {
          value = stripFunnyChars(value);
          value = this._lookupString(value);
          type = "s";
      } else if (type === "number") {
          type = "n";
      } else if (type === "boolean") {
          type = "b";
            value = Number(value);
      } else if (value && value.getTime) {
          type = null;

            var offset = (value.getTimezoneOffset() - DATE_EPOCH.getTimezoneOffset()) * MS_PER_MINUTE;
            value = (value - DATE_EPOCH - offset) / MS_PER_DAY + 1;

            if (!style.format) {
              style.format = "mm-dd-yy";
          }
      } else {
          type = null;
          value = null;
      }

      style = this._lookupStyle(style);

      var cellName = ref(rowIndex, cellIndex);

      if (data.validation) {
          this._addValidation(data.validation, cellName);
        }

        return {
            value: value,
            formula: data.formula,
            type: type,
            style: style,
            ref: cellName
        };
    };

    Worksheet.prototype._addValidation = function _addValidation (v, ref) {
        var tmp = {
            showErrorMessage : v.type === "reject" ? 1 : 0,
            formula1         : v.from,
            formula2         : v.to,
            type             : MAP_EXCEL_TYPE[v.dataType] || v.dataType,
            operator         : MAP_EXCEL_OPERATOR[v.comparerType] || v.comparerType,
            allowBlank       : v.allowNulls ? 1 : 0,
            showDropDown     : v.showButton ? 0 : 1, // LOL, Excel!
          error          : v.messageTemplate,
          errorTitle     : v.titleTemplate
      };
      var json = JSON.stringify(tmp);
      if (!this._validations[json]) {
          this._validations[json] = tmp;
          tmp.sqref = [];
      }
      this._validations[json].sqref.push(ref);
  };

var MAP_EXCEL_OPERATOR = {
    // includes only what differs; key is our operator, value is Excel
    // operator.
    greaterThanOrEqualTo : "greaterThanOrEqual",
    lessThanOrEqualTo    : "lessThanOrEqual"
};

var MAP_EXCEL_TYPE = {
    number: "decimal"
};

var defaultFormats = {
    "General": 0,
    "0": 1,
    "0.00": 2,
    "#,##0": 3,
    "#,##0.00": 4,
    "0%": 9,
    "0.00%": 10,
    "0.00E+00": 11,
    "# ?/?": 12,
    "# ??/??": 13,
    "mm-dd-yy": 14,
    "d-mmm-yy": 15,
    "d-mmm": 16,
    "mmm-yy": 17,
    "h:mm AM/PM": 18,
    "h:mm:ss AM/PM": 19,
    "h:mm": 20,
    "h:mm:ss": 21,
    "m/d/yy h:mm": 22,
    "#,##0 ;(#,##0)": 37,
    "#,##0 ;[Red](#,##0)": 38,
    "#,##0.00;(#,##0.00)": 39,
    "#,##0.00;[Red](#,##0.00)": 40,
    "mm:ss": 45,
    "[h]:mm:ss": 46,
    "mmss.0": 47,
    "##0.0E+0": 48,
    "@": 49,
    "[$-404]e/m/d": 27,
    "m/d/yy": 30,
    "t0": 59,
    "t0.00": 60,
    "t#,##0": 61,
    "t#,##0.00": 62,
    "t0%": 67,
    "t0.00%": 68,
    "t# ?/?": 69,
    "t# ??/??": 70
};

function convertColor(value) {
    var color = value;
    if (color.length < 6) {
        color = color.replace(/(\w)/g, function($0, $1) {
            return $1 + $1;
        });
    }

    color = color.substring(1).toUpperCase();

    if (color.length < 8) {
        color = "FF" + color;
    }

    return color;
}

var Workbook = function Workbook(options) {
      var this$1 = this;

      this.options = options || {};
      this._strings = {
          indexes: {},
          count: 0,
          uniqueCount: 0
      };
      this._styles = [];
      this._borders = [];

      this._sheets = map(this.options.sheets || [], function (options) {
          options.defaults = this$1.options;
          return new Worksheet(options, this$1._strings, this$1._styles, this$1._borders);
      });
  };

  Workbook.prototype.toZIP = function toZIP () {
        var this$1 = this;

      var zip = createZip();

      var docProps = zip.folder("docProps");

      docProps.file("core.xml", CORE({
          creator: this.options.creator || "Kendo UI",
          lastModifiedBy: this.options.creator || "Kendo UI",
          created: this.options.date || new Date().toJSON(),
          modified: this.options.date || new Date().toJSON()
      }));

      var sheetCount = this._sheets.length;

      docProps.file("app.xml", APP({ sheets: this._sheets }));

      var rels = zip.folder("_rels");
      rels.file(".rels", RELS);

      var xl = zip.folder("xl");

      var xlRels = xl.folder("_rels");
      xlRels.file("workbook.xml.rels", WORKBOOK_RELS({ count: sheetCount }));

      var sheetIds = {};

      xl.file("workbook.xml", WORKBOOK({
          sheets: this._sheets,
          filterNames: map(this._sheets, function(sheet, index) {
              var options = sheet.options;
              var sheetName = (options.name || options.title || "Sheet" + (index + 1));
              sheetIds[sheetName.toLowerCase()] = index;
              var filter = options.filter;
              if (filter) {
                  if (filter.ref) {
                      // spreadsheet provides `ref`
                      var a = filter.ref.split(":");
                      var from = parseRef(a[0]);
                      var to = parseRef(a[1]);
                      return {
                          localSheetId: index,
                          name: sheetName,
                          from: $ref(from.row, from.col),
                          to: $ref(to.row, to.col)
                      };
                  } else if (typeof filter.from !== "undefined" && typeof filter.to !== "undefined") {
                      // grid does this
                      return {
                          localSheetId: index,
                          name: sheetName,
                          from: $ref(filterRowIndex(options), filter.from),
                            to: $ref(filterRowIndex(options), filter.to)
                        };
                    }
                }
            }),
            userNames: map(this.options.names || [], function(def) {
                return {
                    name: def.localName,
                    localSheetId: def.sheet ? sheetIds[def.sheet.toLowerCase()] : null,
                    value: def.value,
                    hidden: def.hidden
                };
            })
        }));

        var worksheets = xl.folder("worksheets");

      var sheetRels = worksheets.folder("_rels");

      for (var idx = 0; idx < sheetCount; idx++) {
          var sheet = this$1._sheets[idx];
          var sheetName = "sheet" + (idx + 1) + ".xml";
          var relsXml = sheet.relsToXML();

          if (relsXml) {
              sheetRels.file(sheetName + ".rels", relsXml);
          }

          worksheets.file(sheetName, sheet.toXML(idx));
      }

      var borders = map(this._borders, parseJSON);

      var styles = map(this._styles, parseJSON);

      var hasFont = function(style) {
          return style.underline || style.bold || style.italic || style.color || style.fontFamily || style.fontSize;
      };

      var fonts = map(styles, function(style) {
            if (style.color) {
                style.color = convertColor(style.color);
            }

            if (hasFont(style)) {
                return style;
            }
        });

        var formats = map(styles, function(style) {
            if (style.format && defaultFormats[style.format] === undefined) {
              return style;
          }
      });

      var fills = map(styles, function(style) {
          if (style.background) {
              style.background = convertColor(style.background);
              return style;
          }
      });

      xl.file("styles.xml", STYLES({
          fonts: fonts,
            fills: fills,
          formats: formats,
          borders: borders,
          styles: map(styles, function(style) {
                var result = {};

              if (hasFont(style)) {
                  result.fontId = indexOf(style, fonts) + 1;
                }

                if (style.background) {
                  result.fillId = indexOf(style, fills) + 2;
              }

              result.textAlign = style.textAlign;
              result.verticalAlign = style.verticalAlign;
              result.wrap = style.wrap;
              result.borderId = style.borderId;

                if (style.format) {
                    if (defaultFormats[style.format] !== undefined) {
                        result.numFmtId = defaultFormats[style.format];
                    } else {
                        result.numFmtId = 165 + indexOf(style, formats);
                    }
                }

                return result;
            })
        }));

        xl.file("sharedStrings.xml", SHARED_STRINGS(this._strings));

      zip.file("[Content_Types].xml", CONTENT_TYPES( { count: sheetCount }));

      return zip;
  };

  Workbook.prototype.toDataURL = function toDataURL$1 () {
      var zip = this.toZIP();

      return zip.generateAsync ? zip.generateAsync(DATA_URL_OPTIONS).then(toDataURL) : toDataURL(zip.generate(DATA_URL_OPTIONS));
  };

function borderStyle(width) {
    var alias = "thin";

    if (width === 2) {
        alias = "medium";
    } else if (width === 3) {
        alias = "thick";
    }

    return alias;
}

function borderSideTemplate(name, style) {
    var result = "";

    if (style) {
        result += "<" + name + " style=\"" + borderStyle(style.size) + "\">";
        if (style.color) {
            result += "<color rgb=\"" + convertColor(style.color) + "\"/>";
        }
        result += "</" + name + ">";
    }

    return result;
}

function borderTemplate(border) {
    return "<border>" +
       borderSideTemplate("left", border.left) +
       borderSideTemplate("right", border.right) +
       borderSideTemplate("top", border.top) +
       borderSideTemplate("bottom", border.bottom) +
   "</border>";
}

var EMPTY_CELL = {};
function inflate(rows, mergedCells) {
    var rowData = [];
    var rowsByIndex = [];

    indexRows(rows, function(row, index) {
        var data = {
            _source: row,
            index: index,
            height: row.height,
            cells: []
        };

        rowData.push(data);
        rowsByIndex[index] = data;
    });

    var sorted = sortByIndex(rowData).slice(0);
    var ctx = {
        rowData: rowData,
        rowsByIndex: rowsByIndex,
        mergedCells: mergedCells
    };

    for (var i = 0; i < sorted.length; i++) {
        fillCells(sorted[i], ctx);
        delete sorted[i]._source;
    }

    return sortByIndex(rowData);
}

function indexRows(rows, callback) {
    for (var i = 0; i < rows.length; i++) {
        var row = rows[i];
        if (!row) {
            continue;
        }

        var index = row.index;
        if (typeof index !== "number") {
            index = i;
        }

        callback(row, index);
    }
}

function sortByIndex(items) {
    return items.sort(function(a, b) {
        return a.index - b.index;
    });
}

function pushUnique(array, el) {
    if (array.indexOf(el) < 0) {
        array.push(el);
    }
}

function getSpan(mergedCells, ref) {
    for (var i = 0; i < mergedCells.length; ++i) {
        var range = mergedCells[i];
        var a = range.split(":");
        var topLeft = a[0];
        if (topLeft === ref) {
            var bottomRight = a[1];
            topLeft = parseRef(topLeft);
            bottomRight = parseRef(bottomRight);
            return {
                rowSpan: bottomRight.row - topLeft.row + 1,
                colSpan: bottomRight.col - topLeft.col + 1
            };
        }
    }
}

function parseRef(ref) {
    function getcol(str) {
        var upperStr = str.toUpperCase();
        var col = 0;
        for (var i = 0; i < upperStr.length; ++i) {
            col = col * 26 + upperStr.charCodeAt(i) - 64;
        }
        return col - 1;
    }

    function getrow(str) {
        return parseInt(str, 10) - 1;
    }

    var m = /^([a-z]+)(\d+)$/i.exec(ref);
    return {
        row: getrow(m[2]),
        col: getcol(m[1])
    };
}

function fillCells(data, ctx) {
    var row = data._source;
    var rowIndex = data.index;
    var cells = row.cells;
    var cellData = data.cells;

    if (!cells) {
        return;
    }

    for (var i = 0; i < cells.length; i++) {
        var cell = cells[i] || EMPTY_CELL;

        var rowSpan = cell.rowSpan || 1;
        var colSpan = cell.colSpan || 1;

        var cellIndex = insertCell(cellData, cell);
        var topLeftRef = ref(rowIndex, cellIndex);

        if (rowSpan === 1 && colSpan === 1) {
            // could still be merged: the spreadsheet does not send
            // rowSpan/colSpan, but mergedCells is already populated.
            // https://github.com/telerik/kendo-ui-core/issues/2401
            var tmp = getSpan(ctx.mergedCells, topLeftRef);
            if (tmp) {
                colSpan = tmp.colSpan;
                rowSpan = tmp.rowSpan;
            }
        }

        spanCell(cell, cellData, cellIndex, colSpan);

        if (rowSpan > 1 || colSpan > 1) {
            pushUnique(ctx.mergedCells,
                       topLeftRef + ":" + ref(rowIndex + rowSpan - 1,
                                              cellIndex + colSpan - 1));
        }

        if (rowSpan > 1) {
            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {
                var nextRow = ctx.rowsByIndex[ri];
                if (!nextRow) {
                    nextRow = ctx.rowsByIndex[ri] = { index: ri, cells: [] };
                    ctx.rowData.push(nextRow);
                }

                spanCell(cell, nextRow.cells, cellIndex - 1, colSpan + 1);
            }
        }
    }
}

function insertCell(data, cell) {
    var index;

    if (typeof cell.index === "number") {
        index = cell.index;
        insertCellAt(data, cell, cell.index);
    } else {
        index = appendCell(data, cell);
    }

    return index;
}

function insertCellAt(data, cell, index) {
    data[index] = cell;
}

function appendCell(data, cell) {
    var index = data.length;

    for (var i = 0; i < data.length + 1; i++) {
        if (!data[i]) {
            data[i] = cell;
            index = i;
            break;
        }
    }

    return index;
}

function spanCell(cell, row, startIndex, colSpan) {
    for (var i = 1; i < colSpan; i++) {
        var tmp = {
            borderTop    : cell.borderTop,
            borderRight  : cell.borderRight,
            borderBottom : cell.borderBottom,
            borderLeft   : cell.borderLeft
        };
        insertCellAt(row, tmp, startIndex + i);
    }
}

var SPREADSHEET_FILTERS = function (ref$1) {
  var ref = ref$1.ref;
  var columns = ref$1.columns;
  var generators = ref$1.generators;

  return ("\n<autoFilter ref=\"" + ref + "\">\n  " + (foreach(columns, function (col) { return ("\n    <filterColumn colId=\"" + (col.index) + "\">\n      " + (generators[col.filter](col)) + "\n    </filterColumn>\n  "); })) + "\n</autoFilter>");
};

var SPREADSHEET_CUSTOM_FILTER = function (ref) {
  var logic = ref.logic;
  var criteria = ref.criteria;

  return ("\n<customFilters " + (logic === 'and' ? 'and="1"' : '') + ">\n" + (foreach(criteria, function (f) {
    var op = spreadsheetFilters.customOperator(f);
    var val = spreadsheetFilters.customValue(f);
    return ("<customFilter " + (op ? ("operator=\"" + op + "\"") : '') + " val=\"" + val + "\"/>");
})) + "\n</customFilters>");
};

var SPREADSHEET_DYNAMIC_FILTER = function (ref) {
  var type = ref.type;

  return ("<dynamicFilter type=\"" + (spreadsheetFilters.dynamicFilterType(type)) + "\" />");
};

var SPREADSHEET_TOP_FILTER = function (ref) {
  var type = ref.type;
  var value = ref.value;

  return ("<top10 percent=\"" + (/percent$/i.test(type) ? 1 : 0) + "\"\n       top=\"" + (/^top/i.test(type) ? 1 : 0) + "\"\n       val=\"" + value + "\" />");
};

var SPREADSHEET_VALUE_FILTER = function (ref) {
    var blanks = ref.blanks;
    var values = ref.values;

    return ("<filters " + (blanks ? 'blank="1"' : '') + ">\n    " + (foreach(values, function (value) { return ("\n      <filter val=\"" + value + "\" />"); })) + "\n  </filters>");
};

function spreadsheetFilters(filter) {
    return SPREADSHEET_FILTERS({
        ref: filter.ref,
        columns: filter.columns,
        generators: {
            custom  : SPREADSHEET_CUSTOM_FILTER,
            dynamic : SPREADSHEET_DYNAMIC_FILTER,
            top     : SPREADSHEET_TOP_FILTER,
            value   : SPREADSHEET_VALUE_FILTER
        }
    });
}

spreadsheetFilters.customOperator = function(f) {
    return {
        eq  : "equal",
        gt  : "greaterThan",
        gte : "greaterThanOrEqual",
        lt  : "lessThan",
        lte : "lessThanOrEqual",
        ne  : "notEqual",

        // These are not in the spec, but seems to be how Excel does
        // it (see customValue below).  For the non-negated versions,
        // the operator attribute is missing completely.
        doesnotstartwith: "notEqual",
        doesnotendwith: "notEqual",
        doesnotcontain: "notEqual",
        doesnotmatch: "notEqual"
    }[f.operator.toLowerCase()];
};

spreadsheetFilters.customValue = function(f) {
    function esc(str) {
        return str.replace(/([*?])/g, "~$1");
    }

    switch (f.operator.toLowerCase()) {
        case "startswith":
        case "doesnotstartwith":
            return esc(f.value) + "*";

        case "endswith":
        case "doesnotendwith":
            return "*" + esc(f.value);

        case "contains":
        case "doesnotcontain":
            return "*" + esc(f.value) + "*";

        default:
            return f.value;
    }
};

spreadsheetFilters.dynamicFilterType = function(type) {
    return {
        quarter1  : "Q1",
        quarter2  : "Q2",
        quarter3  : "Q3",
        quarter4  : "Q4",
        january   : "M1",
        february  : "M2",
        march     : "M3",
        april     : "M4",
        may       : "M5",
        june      : "M6",
        july      : "M7",
        august    : "M8",
        september : "M9",
        october   : "M10",
        november  : "M11",
        december  : "M12"
    }[type.toLowerCase()] || type;
};

exports.ExcelExporter = ExcelExporter;
exports.IntlService = IntlService;
exports.TemplateService = TemplateService;
exports.Workbook = Workbook;
exports.Worksheet = Worksheet;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi91c3IvbG9jYWwvamVua2lucy93b3Jrc3BhY2Uva2VuZG8tb294bWxfcmVsZWFzZS9zcmMvc2VydmljZXMvdGVtcGxhdGUtc2VydmljZS5qcyIsIi91c3IvbG9jYWwvamVua2lucy93b3Jrc3BhY2Uva2VuZG8tb294bWxfcmVsZWFzZS9zcmMvdXRpbHMvZ2V0dGVyLmpzIiwiL3Vzci9sb2NhbC9qZW5raW5zL3dvcmtzcGFjZS9rZW5kby1vb3htbF9yZWxlYXNlL3NyYy91dGlscy9tYXAuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL2V4Y2VsLWV4cG9ydGVyLmpzIiwiL3Vzci9sb2NhbC9qZW5raW5zL3dvcmtzcGFjZS9rZW5kby1vb3htbF9yZWxlYXNlL3NyYy9zZXJ2aWNlcy9pbnRsLXNlcnZpY2UuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL3V0aWxzL2NyZWF0ZS16aXAuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL29veG1sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBjdXJyZW50ID0ge1xuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59O1xuXG5jbGFzcyBUZW1wbGF0ZVNlcnZpY2Uge1xuICAgIHN0YXRpYyByZWdpc3Rlcih1c2VySW1wbGVtZW50YXRpb24pIHtcbiAgICAgICAgY3VycmVudCA9IHVzZXJJbXBsZW1lbnRhdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgY29tcGlsZSh0ZW1wbGF0ZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudC5jb21waWxlKHRlbXBsYXRlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRlbXBsYXRlU2VydmljZTsiLCJjb25zdCBGSUVMRF9SRUdFWCA9IC9cXFsoPzooXFxkKyl8WydcIl0oLio/KVsnXCJdKVxcXXwoKD86KD8hXFxbLio/XFxdfFxcLikuKSspL2c7XG5jb25zdCBnZXR0ZXJDYWNoZSA9IHt9O1xuY29uc3QgVU5ERUZJTkVEID0gJ3VuZGVmaW5lZCc7XG5cbmdldHRlckNhY2hlW1VOREVGSU5FRF0gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0dGVyKGZpZWxkKSB7XG4gICAgaWYgKGdldHRlckNhY2hlW2ZpZWxkXSkge1xuICAgICAgICByZXR1cm4gZ2V0dGVyQ2FjaGVbZmllbGRdO1xuICAgIH1cblxuICAgIGNvbnN0IGZpZWxkcyA9IFtdO1xuICAgIGZpZWxkLnJlcGxhY2UoRklFTERfUkVHRVgsIGZ1bmN0aW9uKG1hdGNoLCBpbmRleCwgaW5kZXhBY2Nlc3NvciwgZmllbGQpIHtcbiAgICAgICAgZmllbGRzLnB1c2godHlwZW9mIGluZGV4ICE9PSBVTkRFRklORUQgPyBpbmRleCA6IChpbmRleEFjY2Vzc29yIHx8IGZpZWxkKSk7XG4gICAgfSk7XG5cbiAgICBnZXR0ZXJDYWNoZVtmaWVsZF0gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG9iajtcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRzLmxlbmd0aCAmJiByZXN1bHQ7IGlkeCsrKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbZmllbGRzW2lkeF1dO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGdldHRlckNhY2hlW2ZpZWxkXTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYXAoYXJyYXksIGZ1bmMpIHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKChyZXN1bHQsIGVsLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IGZ1bmMoZWwsIGkpO1xuICAgICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCBbXSk7XG59IiwiaW1wb3J0IFRlbXBsYXRlU2VydmljZSBmcm9tICcuL3NlcnZpY2VzL3RlbXBsYXRlLXNlcnZpY2UnO1xuaW1wb3J0IGdldHRlciBmcm9tICcuL3V0aWxzL2dldHRlcic7XG5pbXBvcnQgbWFwIGZyb20gJy4vdXRpbHMvbWFwJztcblxuZnVuY3Rpb24gZGVmYXVsdEdyb3VwSGVhZGVyVGVtcGxhdGUoZGF0YSkge1xuICAgIHJldHVybiBgJHsgZGF0YS50aXRsZSB9OiAkeyBkYXRhLnZhbHVlIH1gO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJheShsZW5ndGgsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGNhbGxiYWNrKGlkeCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmNsYXNzIEV4Y2VsRXhwb3J0ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5jb2x1bW5zID0gdGhpcy5fdHJpbUNvbHVtbnMob3B0aW9ucy5jb2x1bW5zIHx8IFtdKTtcblxuICAgICAgICB0aGlzLmFsbENvbHVtbnMgPSBtYXAodGhpcy5fbGVhZkNvbHVtbnMob3B0aW9ucy5jb2x1bW5zIHx8IFtdKSwgdGhpcy5fcHJlcGFyZUNvbHVtbik7XG5cbiAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5hbGxDb2x1bW5zLmZpbHRlcihmdW5jdGlvbihjb2x1bW4pIHsgcmV0dXJuICFjb2x1bW4uaGlkZGVuOyB9KTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmRhdGEgPSBvcHRpb25zLmRhdGEgfHwgW107XG4gICAgICAgIHRoaXMuYWdncmVnYXRlcyA9IG9wdGlvbnMuYWdncmVnYXRlcyB8fCB7fTtcbiAgICAgICAgdGhpcy5ncm91cHMgPSBbXS5jb25jYXQob3B0aW9ucy5ncm91cHMgfHwgW10pO1xuICAgICAgICB0aGlzLmhpZXJhcmNoeSA9IG9wdGlvbnMuaGllcmFyY2h5O1xuICAgIH1cblxuICAgIHdvcmtib29rKCkge1xuICAgICAgICBjb25zdCB3b3JrYm9vayA9IHtcbiAgICAgICAgICAgIHNoZWV0czogWyB7XG4gICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5fY29sdW1ucygpLFxuICAgICAgICAgICAgICAgIHJvd3M6IHRoaXMuaGllcmFyY2h5ID8gdGhpcy5faGllcmFjaHlSb3dzKCkgOiB0aGlzLl9yb3dzKCksXG4gICAgICAgICAgICAgICAgZnJlZXplUGFuZTogdGhpcy5fZnJlZXplUGFuZSgpLFxuICAgICAgICAgICAgICAgIGZpbHRlcjogdGhpcy5fZmlsdGVyKClcbiAgICAgICAgICAgIH0gXVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB3b3JrYm9vaztcbiAgICB9XG5cbiAgICBfdHJpbUNvbHVtbnMoY29sdW1ucykge1xuICAgICAgICByZXR1cm4gY29sdW1ucy5maWx0ZXIoKGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IEJvb2xlYW4oY29sdW1uLmZpZWxkKTtcblxuICAgICAgICAgICAgaWYgKCFyZXN1bHQgJiYgY29sdW1uLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLl90cmltQ29sdW1ucyhjb2x1bW4uY29sdW1ucykubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2xlYWZDb2x1bW5zKGNvbHVtbnMpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGNvbHVtbnMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgaWYgKCFjb2x1bW5zW2lkeF0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNvbHVtbnNbaWR4XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQodGhpcy5fbGVhZkNvbHVtbnMoY29sdW1uc1tpZHhdLmNvbHVtbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgX3ByZXBhcmVDb2x1bW4oY29sdW1uKSB7XG4gICAgICAgIGlmICghY29sdW1uLmZpZWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB2YWx1ZSA9IGZ1bmN0aW9uKGRhdGFJdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0dGVyKGNvbHVtbi5maWVsZCkoZGF0YUl0ZW0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxldCB2YWx1ZXMgPSBudWxsO1xuXG4gICAgICAgIGlmIChjb2x1bW4udmFsdWVzKSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSB7fTtcblxuICAgICAgICAgICAgY29sdW1uLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbaXRlbS52YWx1ZV0gPSBpdGVtLnRleHQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFsdWUgPSBmdW5jdGlvbihkYXRhSXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXNbZ2V0dGVyKGNvbHVtbi5maWVsZCkoZGF0YUl0ZW0pXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29sdW1uLCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgICAgIGdyb3VwSGVhZGVyVGVtcGxhdGU6IGNvbHVtbi5ncm91cEhlYWRlclRlbXBsYXRlID8gVGVtcGxhdGVTZXJ2aWNlLmNvbXBpbGUoY29sdW1uLmdyb3VwSGVhZGVyVGVtcGxhdGUpIDogZGVmYXVsdEdyb3VwSGVhZGVyVGVtcGxhdGUsXG4gICAgICAgICAgICBncm91cEZvb3RlclRlbXBsYXRlOiBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSA/IFRlbXBsYXRlU2VydmljZS5jb21waWxlKGNvbHVtbi5ncm91cEZvb3RlclRlbXBsYXRlKSA6IG51bGwsXG4gICAgICAgICAgICBmb290ZXJUZW1wbGF0ZTogY29sdW1uLmZvb3RlclRlbXBsYXRlID8gVGVtcGxhdGVTZXJ2aWNlLmNvbXBpbGUoY29sdW1uLmZvb3RlclRlbXBsYXRlKSA6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2ZpbHRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZmlsdGVyYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZXB0aCA9IHRoaXMuX2RlcHRoKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZyb206IGRlcHRoLFxuICAgICAgICAgICAgdG86IGRlcHRoICsgdGhpcy5jb2x1bW5zLmxlbmd0aCAtIDFcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfY3JlYXRlUGFkZGluZ0NlbGxzKGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQXJyYXkobGVuZ3RoLCAoKSA9PiBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiXG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5wYWRkaW5nQ2VsbE9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICBfZGF0YVJvdyhkYXRhSXRlbSwgbGV2ZWwsIGRlcHRoKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5fY3JlYXRlUGFkZGluZ0NlbGxzKGxldmVsKTtcblxuICAgICAgICAvLyBncm91cGVkXG4gICAgICAgIGlmIChkZXB0aCAmJiBkYXRhSXRlbS5pdGVtcykge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gdGhpcy5hbGxDb2x1bW5zLmZpbHRlcihmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLmZpZWxkID09PSBkYXRhSXRlbS5maWVsZDtcbiAgICAgICAgICAgIH0pWzBdO1xuXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGNvbHVtbiAmJiBjb2x1bW4udGl0bGUgPyBjb2x1bW4udGl0bGUgOiBkYXRhSXRlbS5maWVsZDtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gY29sdW1uID8gY29sdW1uLmdyb3VwSGVhZGVyVGVtcGxhdGUgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgZmllbGQ6IGRhdGFJdGVtLmZpZWxkLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBjb2x1bW4gJiYgY29sdW1uLnZhbHVlcyA/IGNvbHVtbi52YWx1ZXNbZGF0YUl0ZW0udmFsdWVdIDogZGF0YUl0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgYWdncmVnYXRlczogZGF0YUl0ZW0uYWdncmVnYXRlcyxcbiAgICAgICAgICAgICAgICBpdGVtczogZGF0YUl0ZW0uaXRlbXNcbiAgICAgICAgICAgIH0sIGRhdGFJdGVtLmFnZ3JlZ2F0ZXNbZGF0YUl0ZW0uZmllbGRdKTtcblxuICAgICAgICAgICAgbGV0IHZhbHVlID0gYCR7IHRpdGxlIH06ICR7IGRhdGFJdGVtLnZhbHVlIH1gO1xuXG4gICAgICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRlbXBsYXRlKGdyb3VwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2VsbHMucHVzaChPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZGZkZmRmXCIsXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgICAgIGNvbFNwYW46IHRoaXMuY29sdW1ucy5sZW5ndGggKyBkZXB0aCAtIGxldmVsXG4gICAgICAgICAgICB9LCAoY29sdW1uIHx8IHt9KS5ncm91cEhlYWRlckNlbGxPcHRpb25zKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLl9kYXRhUm93cyhkYXRhSXRlbS5pdGVtcywgbGV2ZWwgKyAxKTtcblxuICAgICAgICAgICAgcm93cy51bnNoaWZ0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImdyb3VwLWhlYWRlclwiLFxuICAgICAgICAgICAgICAgIGNlbGxzOiBjZWxsc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiByb3dzLmNvbmNhdCh0aGlzLl9mb290ZXIoZGF0YUl0ZW0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGFDZWxscyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGNlbGxJZHggPSAwOyBjZWxsSWR4IDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgY2VsbElkeCsrKSB7XG4gICAgICAgICAgICBkYXRhQ2VsbHNbY2VsbElkeF0gPSB0aGlzLl9jZWxsKGRhdGFJdGVtLCB0aGlzLmNvbHVtbnNbY2VsbElkeF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGllcmFyY2h5KSB7XG4gICAgICAgICAgICBkYXRhQ2VsbHNbMF0uY29sU3BhbiA9IGRlcHRoIC0gbGV2ZWwgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFsge1xuICAgICAgICAgICAgdHlwZTogXCJkYXRhXCIsXG4gICAgICAgICAgICBjZWxsczogY2VsbHMuY29uY2F0KGRhdGFDZWxscylcbiAgICAgICAgfSBdO1xuICAgIH1cblxuICAgIF9kYXRhUm93cyhkYXRhSXRlbXMsIGxldmVsKSB7XG4gICAgICAgIGNvbnN0IGRlcHRoID0gdGhpcy5fZGVwdGgoKTtcbiAgICAgICAgY29uc3Qgcm93cyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGRhdGFJdGVtcy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICByb3dzLnB1c2guYXBwbHkocm93cywgdGhpcy5fZGF0YVJvdyhkYXRhSXRlbXNbaWR4XSwgbGV2ZWwsIGRlcHRoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcm93cztcbiAgICB9XG5cbiAgICBfaGllcmFjaHlSb3dzKCkge1xuICAgICAgICBjb25zdCBkZXB0aCA9IHRoaXMuX2RlcHRoKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIGNvbnN0IGl0ZW1MZXZlbCA9IHRoaXMuaGllcmFyY2h5Lml0ZW1MZXZlbDtcbiAgICAgICAgY29uc3QgaGFzRm9vdGVyID0gdGhpcy5faGFzRm9vdGVyVGVtcGxhdGUoKTtcbiAgICAgICAgY29uc3Qgcm93cyA9IFtdO1xuICAgICAgICBjb25zdCBwYXJlbnRzID0gW107XG4gICAgICAgIGxldCBwcmV2aW91c0xldmVsID0gMDtcbiAgICAgICAgbGV0IHByZXZpb3VzSXRlbUlkO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGRhdGEubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGRhdGFbaWR4XTtcbiAgICAgICAgICAgIGNvbnN0IGxldmVsID0gaXRlbUxldmVsKGl0ZW0pO1xuXG4gICAgICAgICAgICBpZiAoaGFzRm9vdGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID4gcHJldmlvdXNMZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2goeyBpZDogcHJldmlvdXNJdGVtSWQsIGxldmVsOiBwcmV2aW91c0xldmVsIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPCBwcmV2aW91c0xldmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaC5hcHBseShyb3dzLCB0aGlzLl9oaWVyYXJjaHlGb290ZXJSb3dzKHBhcmVudHMsIGxldmVsLCBkZXB0aCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHByZXZpb3VzTGV2ZWwgPSBsZXZlbDtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCA9IGl0ZW0uaWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJvd3MucHVzaC5hcHBseShyb3dzLCB0aGlzLl9kYXRhUm93KGl0ZW0sIGxldmVsICsgMSwgZGVwdGgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNGb290ZXIpIHtcbiAgICAgICAgICAgIHJvd3MucHVzaC5hcHBseShyb3dzLCB0aGlzLl9oaWVyYXJjaHlGb290ZXJSb3dzKHBhcmVudHMsIDAsIGRlcHRoKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJvb3RBZ2dyZWdhdGUgPSBkYXRhLmxlbmd0aCA/IHRoaXMuYWdncmVnYXRlc1tkYXRhWzBdLnBhcmVudElkXSA6IHt9O1xuICAgICAgICAgICAgcm93cy5wdXNoKHRoaXMuX2hpZXJhcmNoeUZvb3Rlcihyb290QWdncmVnYXRlLCAwLCBkZXB0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcHJlcGVuZEhlYWRlclJvd3Mocm93cyk7XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2hpZXJhcmNoeUZvb3RlclJvd3MocGFyZW50cywgY3VycmVudExldmVsLCBkZXB0aCkge1xuICAgICAgICBjb25zdCByb3dzID0gW107XG4gICAgICAgIHdoaWxlIChwYXJlbnRzLmxlbmd0aCAmJiBwYXJlbnRzW3BhcmVudHMubGVuZ3RoIC0gMV0ubGV2ZWwgPj0gY3VycmVudExldmVsKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBwYXJlbnRzLnBvcCgpO1xuICAgICAgICAgICAgcm93cy5wdXNoKHRoaXMuX2hpZXJhcmNoeUZvb3Rlcih0aGlzLmFnZ3JlZ2F0ZXNbcGFyZW50LmlkXSwgcGFyZW50LmxldmVsICsgMSwgZGVwdGgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByb3dzO1xuICAgIH1cblxuICAgIF9oYXNGb290ZXJUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IHRoaXMuY29sdW1ucztcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgY29sdW1ucy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uc1tpZHhdLmZvb3RlclRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGllcmFyY2h5Rm9vdGVyKGFnZ3JlZ2F0ZXMsIGxldmVsLCBkZXB0aCkge1xuICAgICAgICBjb25zdCBjZWxscyA9IHRoaXMuY29sdW1ucy5tYXAoZnVuY3Rpb24oY29sdW1uLCBpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgY29sU3BhbiA9IGluZGV4ID8gMSA6IGRlcHRoIC0gbGV2ZWwgKyAxO1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZGZkZmRmXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIixcbiAgICAgICAgICAgICAgICAgICAgY29sU3BhbjogY29sU3BhbixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbHVtbi5mb290ZXJUZW1wbGF0ZShPYmplY3QuYXNzaWduKHt9LCAoYWdncmVnYXRlcyB8fCB7fSlbY29sdW1uLmZpZWxkXSkpXG4gICAgICAgICAgICAgICAgfSwgY29sdW1uLmZvb3RlckNlbGxPcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIixcbiAgICAgICAgICAgICAgICBjb2xTcGFuOiBjb2xTcGFuXG4gICAgICAgICAgICB9LCBjb2x1bW4uZm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJmb290ZXJcIixcbiAgICAgICAgICAgIGNlbGxzOiB0aGlzLl9jcmVhdGVQYWRkaW5nQ2VsbHMobGV2ZWwpLmNvbmNhdChjZWxscylcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfZm9vdGVyKGRhdGFJdGVtKSB7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBbXTtcbiAgICAgICAgbGV0IGZvb3RlciA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5jb2x1bW5zLm1hcCgoY29sdW1uKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZURhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmFnZ3JlZ2F0ZXMsIGRhdGFJdGVtLmFnZ3JlZ2F0ZXMsIGRhdGFJdGVtLmFnZ3JlZ2F0ZXNbY29sdW1uLmZpZWxkXSwge1xuICAgICAgICAgICAgICAgICAgICBncm91cDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IGRhdGFJdGVtLml0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGRhdGFJdGVtLmZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFJdGVtLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90ZWxlcmlrL2tlbmRvLXVpLWNvcmUvaXNzdWVzLzMwMjRcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdGVsZXJpay9rZW5kby11aS1jb3JlL2lzc3Vlcy8zMDk1XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVEYXRhW2RhdGFJdGVtLmZpZWxkXSA9IHRlbXBsYXRlRGF0YTtcblxuICAgICAgICAgICAgICAgIGZvb3RlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiNkZmRmZGZcIixcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUodGVtcGxhdGVEYXRhKVxuICAgICAgICAgICAgICAgIH0sIGNvbHVtbi5ncm91cEZvb3RlckNlbGxPcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIlxuICAgICAgICAgICAgfSwgY29sdW1uLmdyb3VwRm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZm9vdGVyKSB7XG4gICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiZ3JvdXAtZm9vdGVyXCIsXG4gICAgICAgICAgICAgICAgY2VsbHM6IHRoaXMuX2NyZWF0ZVBhZGRpbmdDZWxscyh0aGlzLmdyb3Vwcy5sZW5ndGgpLmNvbmNhdChjZWxscylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2lzQ29sdW1uVmlzaWJsZShjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Zpc2libGVDb2x1bW5zKFsgY29sdW1uIF0pLmxlbmd0aCA+IDAgJiYgKGNvbHVtbi5maWVsZCB8fCBjb2x1bW4uY29sdW1ucyk7XG4gICAgfVxuXG4gICAgX3Zpc2libGVDb2x1bW5zKGNvbHVtbnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbHVtbnMuZmlsdGVyKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSAhY29sdW1uLmhpZGRlbjtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgY29sdW1uLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLl92aXNpYmxlQ29sdW1ucyhjb2x1bW4uY29sdW1ucykubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9oZWFkZXJSb3cocm93LCBncm91cHMpIHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHJvdy5jZWxscy5tYXAoZnVuY3Rpb24oY2VsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oY2VsbCwge1xuICAgICAgICAgICAgICAgIGNvbFNwYW46IGNlbGwuY29sU3BhbiA+IDEgPyBjZWxsLmNvbFNwYW4gOiAxLFxuICAgICAgICAgICAgICAgIHJvd1NwYW46IHJvdy5yb3dTcGFuID4gMSAmJiAhY2VsbC5jb2xTcGFuID8gcm93LnJvd1NwYW4gOiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaGllcmFyY2h5KSB7XG4gICAgICAgICAgICBoZWFkZXJzWzBdLmNvbFNwYW4gPSB0aGlzLl9kZXB0aCgpICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcImhlYWRlclwiLFxuICAgICAgICAgICAgY2VsbHM6IGNyZWF0ZUFycmF5KGdyb3Vwcy5sZW5ndGgsICgpID0+IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiIzdhN2E3YVwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNmZmZcIlxuICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zLmhlYWRlclBhZGRpbmdDZWxsT3B0aW9ucykpLmNvbmNhdChoZWFkZXJzKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9wcmVwZW5kSGVhZGVyUm93cyhyb3dzKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuZ3JvdXBzO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlclJvd3MgPSBbIHsgcm93U3BhbjogMSwgY2VsbHM6IFtdLCBpbmRleDogMCB9IF07XG5cbiAgICAgICAgdGhpcy5fcHJlcGFyZUhlYWRlclJvd3MoaGVhZGVyUm93cywgdGhpcy5vcHRpb25zLmNvbHVtbnMpO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IGhlYWRlclJvd3MubGVuZ3RoIC0gMTsgaWR4ID49IDA7IGlkeC0tKSB7XG4gICAgICAgICAgICByb3dzLnVuc2hpZnQodGhpcy5faGVhZGVyUm93KGhlYWRlclJvd3NbaWR4XSwgZ3JvdXBzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcHJlcGFyZUhlYWRlclJvd3Mocm93cywgY29sdW1ucywgcGFyZW50Q2VsbCwgcGFyZW50Um93KSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHBhcmVudFJvdyB8fCByb3dzW3Jvd3MubGVuZ3RoIC0gMV07XG4gICAgICAgIGxldCBjaGlsZFJvdyA9IHJvd3Nbcm93LmluZGV4ICsgMV07XG4gICAgICAgIGxldCB0b3RhbENvbFNwYW4gPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGNvbHVtbnMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gY29sdW1uc1tpZHhdO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ29sdW1uVmlzaWJsZShjb2x1bW4pKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiIzdhN2E3YVwiLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjb2x1bW4udGl0bGUgfHwgY29sdW1uLmZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBjb2xTcGFuOiAwXG4gICAgICAgICAgICAgICAgfSwgY29sdW1uLmhlYWRlckNlbGxPcHRpb25zKTtcbiAgICAgICAgICAgICAgICByb3cuY2VsbHMucHVzaChjZWxsKTtcblxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uY29sdW1ucyAmJiBjb2x1bW4uY29sdW1ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZFJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRSb3cgPSB7IHJvd1NwYW46IDAsIGNlbGxzOiBbXSwgaW5kZXg6IHJvd3MubGVuZ3RoIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goY2hpbGRSb3cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNlbGwuY29sU3BhbiA9IHRoaXMuX3RyaW1Db2x1bW5zKHRoaXMuX3Zpc2libGVDb2x1bW5zKGNvbHVtbi5jb2x1bW5zKSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmVwYXJlSGVhZGVyUm93cyhyb3dzLCBjb2x1bW4uY29sdW1ucywgY2VsbCwgY2hpbGRSb3cpO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbENvbFNwYW4gKz0gY2VsbC5jb2xTcGFuIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgcm93LnJvd1NwYW4gPSByb3dzLmxlbmd0aCAtIHJvdy5pbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyZW50Q2VsbCkge1xuICAgICAgICAgICAgcGFyZW50Q2VsbC5jb2xTcGFuICs9IHRvdGFsQ29sU3BhbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9yb3dzKCkge1xuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5fZGF0YVJvd3ModGhpcy5kYXRhLCAwKTtcblxuICAgICAgICBpZiAodGhpcy5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fcHJlcGVuZEhlYWRlclJvd3Mocm93cyk7XG4gICAgICAgICAgICBsZXQgZm9vdGVyID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5jb2x1bW5zLm1hcCgoY29sdW1uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBmb290ZXIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbHVtbi5mb290ZXJUZW1wbGF0ZShPYmplY3QuYXNzaWduKHt9LCB0aGlzLmFnZ3JlZ2F0ZXMsIHRoaXMuYWdncmVnYXRlc1tjb2x1bW4uZmllbGRdKSlcbiAgICAgICAgICAgICAgICAgICAgfSwgY29sdW1uLmZvb3RlckNlbGxPcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjMzMzXCJcbiAgICAgICAgICAgICAgICB9LCBjb2x1bW4uZm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChmb290ZXIpIHtcbiAgICAgICAgICAgICAgICByb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZvb3RlclwiLFxuICAgICAgICAgICAgICAgICAgICBjZWxsczogdGhpcy5fY3JlYXRlUGFkZGluZ0NlbGxzKHRoaXMuZ3JvdXBzLmxlbmd0aCkuY29uY2F0KGNlbGxzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2hlYWRlckRlcHRoKGNvbHVtbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gMTtcbiAgICAgICAgbGV0IG1heCA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgY29sdW1ucy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBpZiAoY29sdW1uc1tpZHhdLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gdGhpcy5faGVhZGVyRGVwdGgoY29sdW1uc1tpZHhdLmNvbHVtbnMpO1xuICAgICAgICAgICAgICAgIGlmICh0ZW1wID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQgKyBtYXg7XG4gICAgfVxuXG4gICAgX2ZyZWV6ZVBhbmUoKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLl92aXNpYmxlQ29sdW1ucyh0aGlzLm9wdGlvbnMuY29sdW1ucyB8fCBbXSk7XG5cbiAgICAgICAgY29uc3QgY29sU3BsaXQgPSB0aGlzLl92aXNpYmxlQ29sdW1ucyh0aGlzLl90cmltQ29sdW1ucyh0aGlzLl9sZWFmQ29sdW1ucyhjb2x1bW5zLmZpbHRlcihmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4ubG9ja2VkO1xuICAgICAgICB9KSkpKS5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvd1NwbGl0OiB0aGlzLl9oZWFkZXJEZXB0aChjb2x1bW5zKSxcbiAgICAgICAgICAgIGNvbFNwbGl0OiBjb2xTcGxpdCA/IGNvbFNwbGl0ICsgdGhpcy5ncm91cHMubGVuZ3RoIDogMFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9jZWxsKGRhdGFJdGVtLCBjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdmFsdWU6IGNvbHVtbi52YWx1ZShkYXRhSXRlbSlcbiAgICAgICAgfSwgY29sdW1uLmNlbGxPcHRpb25zKTtcbiAgICB9XG5cbiAgICBfZGVwdGgoKSB7XG4gICAgICAgIGxldCBkZXB0aCA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuaGllcmFyY2h5KSB7XG4gICAgICAgICAgICBkZXB0aCA9IHRoaXMuaGllcmFyY2h5LmRlcHRoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVwdGggPSB0aGlzLmdyb3Vwcy5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVwdGg7XG4gICAgfVxuXG4gICAgX2NvbHVtbnMoKSB7XG4gICAgICAgIGNvbnN0IGRlcHRoID0gdGhpcy5fZGVwdGgoKTtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IGNyZWF0ZUFycmF5KGRlcHRoLCAoKSA9PiAoeyB3aWR0aDogMjAgfSkpO1xuXG4gICAgICAgIHJldHVybiBjb2x1bW5zLmNvbmNhdCh0aGlzLmNvbHVtbnMubWFwKGZ1bmN0aW9uKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcGFyc2VJbnQoY29sdW1uLndpZHRoLCAxMCksXG4gICAgICAgICAgICAgICAgYXV0b1dpZHRoOiBjb2x1bW4ud2lkdGggPyBmYWxzZSA6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEV4Y2VsRXhwb3J0ZXI7XG4iLCJsZXQgY3VycmVudCA9IHtcbiAgICB0b1N0cmluZzogKHZhbHVlKSA9PiB2YWx1ZVxufTtcblxuY2xhc3MgSW50bFNlcnZpY2Uge1xuICAgIHN0YXRpYyByZWdpc3Rlcih1c2VySW1wbGVtZW50YXRpb24pIHtcbiAgICAgICAgY3VycmVudCA9IHVzZXJJbXBsZW1lbnRhdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgdG9TdHJpbmcodmFsdWUsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gY3VycmVudC50b1N0cmluZyh2YWx1ZSwgZm9ybWF0KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEludGxTZXJ2aWNlOyIsImltcG9ydCBKU1ppcCBmcm9tICdqc3ppcC9kaXN0L2pzemlwJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlWmlwKCkge1xuICAgIHJldHVybiBuZXcgSlNaaXAoKTtcbn0iLCJpbXBvcnQgbWFwIGZyb20gJy4vdXRpbHMvbWFwJztcbmltcG9ydCBjcmVhdGVaaXAgZnJvbSAnLi91dGlscy9jcmVhdGUtemlwJztcbmltcG9ydCBJbnRsU2VydmljZSBmcm9tICcuL3NlcnZpY2VzL2ludGwtc2VydmljZSc7XG5cbmNvbnN0IERBVEFfVVJMX1BSRUZJWCA9IFwiZGF0YTphcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldDtiYXNlNjQsXCI7XG5jb25zdCBEQVRBX1VSTF9PUFRJT05TID0geyBjb21wcmVzc2lvbjogXCJERUZMQVRFXCIsIHR5cGU6IFwiYmFzZTY0XCIgfTtcbmNvbnN0IE1TX1BFUl9NSU5VVEUgPSA2MDAwMDtcbmNvbnN0IE1TX1BFUl9EQVkgPSA4NjQwMDAwMDtcblxuLyogZXNsaW50LWRpc2FibGUga2V5LXNwYWNpbmcsIG5vLWFycm93LWNvbmRpdGlvbiwgaW5kZW50LCBuby1uZXN0ZWQtdGVybmFyeSwgY29uc2lzdGVudC1yZXR1cm4gKi9cblxuZnVuY3Rpb24gdG9EYXRhVVJMKGNvbnRlbnQpIHtcbiAgICByZXR1cm4gREFUQV9VUkxfUFJFRklYICsgY29udGVudDtcbn1cblxuZnVuY3Rpb24gaW5kZXhPZih0aGluZywgYXJyYXkpIHtcbiAgICByZXR1cm4gYXJyYXkuaW5kZXhPZih0aGluZyk7XG59XG5cbmNvbnN0IHBhcnNlSlNPTiA9IEpTT04ucGFyc2UuYmluZChKU09OKTtcblxuZnVuY3Rpb24gRVNDKHZhbCkge1xuICAgIHJldHVybiBTdHJpbmcodmFsKVxuICAgICAgICAucmVwbGFjZSgvJi9nLCBcIiZhbXA7XCIpXG4gICAgICAgIC5yZXBsYWNlKC88L2csIFwiJmx0O1wiKVxuICAgICAgICAucmVwbGFjZSgvPi9nLCBcIiZndDtcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcXCIvZywgXCImcXVvdDtcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcJy9nLCBcIiYjMzk7XCIpO1xufVxuXG5mdW5jdGlvbiByZXBlYXQoY291bnQsIGZ1bmMpIHtcbiAgICBsZXQgc3RyID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgc3RyICs9IGZ1bmMoaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5cbmZ1bmN0aW9uIGZvcmVhY2goYXJyLCBmdW5jKSB7XG4gICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgc3RyICs9IGZ1bmMoYXJyW2ldLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cblxuY29uc3QgWE1MSEVBRCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyJztcblxuY29uc3QgUkVMUyA9IGAke1hNTEhFQUR9XG4gICAgICAgICAgICA8UmVsYXRpb25zaGlwcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwc1wiPlxuICAgICAgICAgICAgICAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZDNcIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9leHRlbmRlZC1wcm9wZXJ0aWVzXCIgVGFyZ2V0PVwiZG9jUHJvcHMvYXBwLnhtbFwiLz5cbiAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXAgSWQ9XCJySWQyXCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwcy9tZXRhZGF0YS9jb3JlLXByb3BlcnRpZXNcIiBUYXJnZXQ9XCJkb2NQcm9wcy9jb3JlLnhtbFwiLz5cbiAgICAgICAgICAgICAgIDxSZWxhdGlvbnNoaXAgSWQ9XCJySWQxXCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvb2ZmaWNlRG9jdW1lbnRcIiBUYXJnZXQ9XCJ4bC93b3JrYm9vay54bWxcIi8+XG4gICAgICAgICAgICA8L1JlbGF0aW9uc2hpcHM+YDtcblxuY29uc3QgQ09SRSA9ICh7IGNyZWF0b3IsIGxhc3RNb2RpZmllZEJ5LCBjcmVhdGVkLCBtb2RpZmllZCB9KSA9PiBgJHtYTUxIRUFEfVxuIDxjcDpjb3JlUHJvcGVydGllcyB4bWxuczpjcD1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvbWV0YWRhdGEvY29yZS1wcm9wZXJ0aWVzXCJcbiAgIHhtbG5zOmRjPVwiaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS9cIiB4bWxuczpkY3Rlcm1zPVwiaHR0cDovL3B1cmwub3JnL2RjL3Rlcm1zL1wiXG4gICB4bWxuczpkY21pdHlwZT1cImh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9cIiB4bWxuczp4c2k9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiPlxuICAgPGRjOmNyZWF0b3I+JHtFU0MoY3JlYXRvcil9PC9kYzpjcmVhdG9yPlxuICAgPGNwOmxhc3RNb2RpZmllZEJ5PiR7RVNDKGxhc3RNb2RpZmllZEJ5KX08L2NwOmxhc3RNb2RpZmllZEJ5PlxuICAgPGRjdGVybXM6Y3JlYXRlZCB4c2k6dHlwZT1cImRjdGVybXM6VzNDRFRGXCI+JHtFU0MoY3JlYXRlZCl9PC9kY3Rlcm1zOmNyZWF0ZWQ+XG4gICA8ZGN0ZXJtczptb2RpZmllZCB4c2k6dHlwZT1cImRjdGVybXM6VzNDRFRGXCI+JHtFU0MobW9kaWZpZWQpfTwvZGN0ZXJtczptb2RpZmllZD5cbjwvY3A6Y29yZVByb3BlcnRpZXM+YDtcblxuY29uc3QgQVBQID0gKHsgc2hlZXRzIH0pID0+IGAke1hNTEhFQUR9XG48UHJvcGVydGllcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L2V4dGVuZGVkLXByb3BlcnRpZXNcIiB4bWxuczp2dD1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L2RvY1Byb3BzVlR5cGVzXCI+XG4gIDxBcHBsaWNhdGlvbj5NaWNyb3NvZnQgRXhjZWw8L0FwcGxpY2F0aW9uPlxuICA8RG9jU2VjdXJpdHk+MDwvRG9jU2VjdXJpdHk+XG4gIDxTY2FsZUNyb3A+ZmFsc2U8L1NjYWxlQ3JvcD5cbiAgPEhlYWRpbmdQYWlycz5cbiAgICA8dnQ6dmVjdG9yIHNpemU9XCIyXCIgYmFzZVR5cGU9XCJ2YXJpYW50XCI+XG4gICAgICA8dnQ6dmFyaWFudD5cbiAgICAgICAgPHZ0Omxwc3RyPldvcmtzaGVldHM8L3Z0Omxwc3RyPlxuICAgICAgPC92dDp2YXJpYW50PlxuICAgICAgPHZ0OnZhcmlhbnQ+XG4gICAgICAgIDx2dDppND4ke3NoZWV0cy5sZW5ndGh9PC92dDppND5cbiAgICAgIDwvdnQ6dmFyaWFudD5cbiAgICA8L3Z0OnZlY3Rvcj5cbiAgPC9IZWFkaW5nUGFpcnM+XG4gIDxUaXRsZXNPZlBhcnRzPlxuICAgIDx2dDp2ZWN0b3Igc2l6ZT1cIiR7c2hlZXRzLmxlbmd0aH1cIiBiYXNlVHlwZT1cImxwc3RyXCI+JHtcbiAgICAgIGZvcmVhY2goc2hlZXRzLCAoc2hlZXQsIGkpID0+XG4gICAgICAgIHNoZWV0Lm9wdGlvbnMudGl0bGVcbiAgICAgICAgICA/IGA8dnQ6bHBzdHI+JHtFU0Moc2hlZXQub3B0aW9ucy50aXRsZSl9PC92dDpscHN0cj5gXG4gICAgICAgICAgOiBgPHZ0Omxwc3RyPlNoZWV0JHtpICsgMX08L3Z0Omxwc3RyPmBcbiAgICAgIClcbiAgICB9PC92dDp2ZWN0b3I+XG4gIDwvVGl0bGVzT2ZQYXJ0cz5cbiAgPExpbmtzVXBUb0RhdGU+ZmFsc2U8L0xpbmtzVXBUb0RhdGU+XG4gIDxTaGFyZWREb2M+ZmFsc2U8L1NoYXJlZERvYz5cbiAgPEh5cGVybGlua3NDaGFuZ2VkPmZhbHNlPC9IeXBlcmxpbmtzQ2hhbmdlZD5cbiAgPEFwcFZlcnNpb24+MTQuMDMwMDwvQXBwVmVyc2lvbj5cbjwvUHJvcGVydGllcz5gO1xuXG5jb25zdCBDT05URU5UX1RZUEVTID0gKHsgY291bnQgfSkgPT4gYCR7WE1MSEVBRH1cbjxUeXBlcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvY29udGVudC10eXBlc1wiPlxuICA8RGVmYXVsdCBFeHRlbnNpb249XCJyZWxzXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtcGFja2FnZS5yZWxhdGlvbnNoaXBzK3htbFwiIC8+XG4gIDxEZWZhdWx0IEV4dGVuc2lvbj1cInhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24veG1sXCIgLz5cbiAgPE92ZXJyaWRlIFBhcnROYW1lPVwiL3hsL3dvcmtib29rLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQubWFpbit4bWxcIiAvPlxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvc3R5bGVzLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc3R5bGVzK3htbFwiLz5cbiAgPE92ZXJyaWRlIFBhcnROYW1lPVwiL3hsL3NoYXJlZFN0cmluZ3MueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGFyZWRTdHJpbmdzK3htbFwiLz5cbiAgJHtyZXBlYXQoY291bnQsIGlkeCA9PlxuICAgIGA8T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvd29ya3NoZWV0cy9zaGVldCR7aWR4ICsgMX0ueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC53b3Jrc2hlZXQreG1sXCIgLz5gKX1cbiAgPE92ZXJyaWRlIFBhcnROYW1lPVwiL2RvY1Byb3BzL2NvcmUueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtcGFja2FnZS5jb3JlLXByb3BlcnRpZXMreG1sXCIgLz5cbiAgPE92ZXJyaWRlIFBhcnROYW1lPVwiL2RvY1Byb3BzL2FwcC54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5leHRlbmRlZC1wcm9wZXJ0aWVzK3htbFwiIC8+XG48L1R5cGVzPmA7XG5cbmNvbnN0IFdPUktCT09LID0gKHsgc2hlZXRzLCBmaWx0ZXJOYW1lcywgdXNlck5hbWVzIH0pID0+IGAke1hNTEhFQUR9XG48d29ya2Jvb2sgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIiB4bWxuczpyPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwc1wiPlxuICA8ZmlsZVZlcnNpb24gYXBwTmFtZT1cInhsXCIgbGFzdEVkaXRlZD1cIjVcIiBsb3dlc3RFZGl0ZWQ9XCI1XCIgcnVwQnVpbGQ9XCI5MzAzXCIgLz5cbiAgPHdvcmtib29rUHIgZGVmYXVsdFRoZW1lVmVyc2lvbj1cIjEyNDIyNlwiIC8+XG4gIDxib29rVmlld3M+XG4gICAgPHdvcmtib29rVmlldyB4V2luZG93PVwiMjQwXCIgeVdpbmRvdz1cIjQ1XCIgd2luZG93V2lkdGg9XCIxODE5NVwiIHdpbmRvd0hlaWdodD1cIjc5OTVcIiAvPlxuICA8L2Jvb2tWaWV3cz5cbiAgPHNoZWV0cz5cbiAgJHtmb3JlYWNoKHNoZWV0cywgKHsgb3B0aW9ucyB9LCBpKSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IG9wdGlvbnMubmFtZSB8fCBvcHRpb25zLnRpdGxlIHx8IGBTaGVldCR7aSArIDF9YDtcbiAgICByZXR1cm4gYDxzaGVldCBuYW1lPVwiJHtFU0MobmFtZSl9XCIgc2hlZXRJZD1cIiR7aSArIDF9XCIgcjppZD1cInJJZCR7aSArIDF9XCIgLz5gO1xuICB9KX1cbiAgPC9zaGVldHM+XG4gICR7ZmlsdGVyTmFtZXMubGVuZ3RoIHx8IHVzZXJOYW1lcy5sZW5ndGggPyBgXG4gICAgPGRlZmluZWROYW1lcz5cbiAgICAgICR7Zm9yZWFjaChmaWx0ZXJOYW1lcywgKGYpID0+IGBcbiAgICAgICAgIDxkZWZpbmVkTmFtZSBuYW1lPVwiX3hsbm0uX0ZpbHRlckRhdGFiYXNlXCIgaGlkZGVuPVwiMVwiIGxvY2FsU2hlZXRJZD1cIiR7Zi5sb2NhbFNoZWV0SWR9XCI+JHtFU0MoZi5uYW1lKX0hJHtFU0MoZi5mcm9tKX06JHtFU0MoZi50byl9PC9kZWZpbmVkTmFtZT5gKX1cbiAgICAgICR7Zm9yZWFjaCh1c2VyTmFtZXMsIChmKSA9PiBgXG4gICAgICAgICA8ZGVmaW5lZE5hbWUgbmFtZT1cIiR7Zi5uYW1lfVwiIGhpZGRlbj1cIiR7Zi5oaWRkZW4gPyAxIDogMH1cIiAke2YubG9jYWxTaGVldElkICE9IG51bGwgPyBgbG9jYWxTaGVldElkPVwiJHtmLmxvY2FsU2hlZXRJZH1cImAgOiAnJ30+JHtFU0MoZi52YWx1ZSl9PC9kZWZpbmVkTmFtZT5gKX1cbiAgICA8L2RlZmluZWROYW1lcz5gIDogJyd9XG4gIDxjYWxjUHIgZnVsbENhbGNPbkxvYWQ9XCIxXCIgY2FsY0lkPVwiMTQ1NjIxXCIgLz5cbjwvd29ya2Jvb2s+YDtcblxuY29uc3QgV09SS1NIRUVUID0gKHtcbiAgICBmcm96ZW5Db2x1bW5zLFxuICAgIGZyb3plblJvd3MsXG4gICAgY29sdW1ucyxcbiAgICBkZWZhdWx0cyxcbiAgICBkYXRhLFxuICAgIGluZGV4LFxuICAgIG1lcmdlQ2VsbHMsXG4gICAgYXV0b0ZpbHRlcixcbiAgICBmaWx0ZXIsXG4gICAgc2hvd0dyaWRMaW5lcyxcbiAgICBoeXBlcmxpbmtzLFxuICAgIHZhbGlkYXRpb25zLFxuICAgIGRlZmF1bHRDZWxsU3R5bGVJZCxcbiAgICBydGxcbn0pID0+IGAke1hNTEhFQUR9XG48d29ya3NoZWV0IHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluXCIgeG1sbnM6bWM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvbWFya3VwLWNvbXBhdGliaWxpdHkvMjAwNlwiIHhtbG5zOnI9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzXCIgeG1sbnM6eDE0YWM9XCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9zcHJlYWRzaGVldG1sLzIwMDkvOS9hY1wiIG1jOklnbm9yYWJsZT1cIngxNGFjXCI+XG4gICA8ZGltZW5zaW9uIHJlZj1cIkExXCIgLz5cblxuICAgPHNoZWV0Vmlld3M+XG4gICAgIDxzaGVldFZpZXcgJHsgcnRsID8gJ3JpZ2h0VG9MZWZ0PVwiMVwiJyA6ICcnIH0gJHtpbmRleCA9PT0gMCA/ICd0YWJTZWxlY3RlZD1cIjFcIicgOiAnJ30gd29ya2Jvb2tWaWV3SWQ9XCIwXCIgJHtzaG93R3JpZExpbmVzID09PSBmYWxzZSA/ICdzaG93R3JpZExpbmVzPVwiMFwiJyA6ICcnfT5cbiAgICAgJHtmcm96ZW5Sb3dzIHx8IGZyb3plbkNvbHVtbnMgPyBgXG4gICAgICAgPHBhbmUgc3RhdGU9XCJmcm96ZW5cIlxuICAgICAgICAgJHtmcm96ZW5Db2x1bW5zID8gYHhTcGxpdD1cIiR7ZnJvemVuQ29sdW1uc31cImAgOiAnJ31cbiAgICAgICAgICR7ZnJvemVuUm93cyA/IGB5U3BsaXQ9XCIke2Zyb3plblJvd3N9XCJgIDogJyd9XG4gICAgICAgICB0b3BMZWZ0Q2VsbD1cIiR7U3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIChmcm96ZW5Db2x1bW5zIHx8IDApKSArICgoZnJvemVuUm93cyB8fCAwKSArIDEpfVwiXG4gICAgICAgLz5gIDogJyd9XG4gICAgIDwvc2hlZXRWaWV3PlxuICAgPC9zaGVldFZpZXdzPlxuXG4gICA8c2hlZXRGb3JtYXRQciB4MTRhYzpkeURlc2NlbnQ9XCIwLjI1XCIgZGVmYXVsdFJvd0hlaWdodD1cIiR7ZGVmYXVsdHMucm93SGVpZ2h0ID8gZGVmYXVsdHMucm93SGVpZ2h0ICogMC43NSA6IDE1fVwiXG4gICAgICR7ZGVmYXVsdHMuY29sdW1uV2lkdGggPyBgZGVmYXVsdENvbFdpZHRoPVwiJHt0b1dpZHRoKGRlZmF1bHRzLmNvbHVtbldpZHRoKX1cImAgOiAnJ30gLz5cblxuICAgJHtkZWZhdWx0Q2VsbFN0eWxlSWQgIT0gbnVsbCB8fCAoY29sdW1ucyAmJiBjb2x1bW5zLmxlbmd0aCA+IDApID8gYFxuICAgICA8Y29scz5cbiAgICAgICAkeyFjb2x1bW5zIHx8ICFjb2x1bW5zLmxlbmd0aCA/IGBcbiAgICAgICAgIDxjb2wgbWluPVwiMVwiIG1heD1cIjE2Mzg0XCIgc3R5bGU9XCIke2RlZmF1bHRDZWxsU3R5bGVJZH1cIlxuICAgICAgICAgICAgICAke2RlZmF1bHRzLmNvbHVtbldpZHRoID8gYHdpZHRoPVwiJHt0b1dpZHRoKGRlZmF1bHRzLmNvbHVtbldpZHRoKX1cImAgOiAnJ30gLz4gYCA6ICcnfVxuICAgICAgICR7Zm9yZWFjaChjb2x1bW5zLCAoY29sdW1uLCBjaSkgPT4ge1xuICAgICAgICAgY29uc3QgY29sdW1uSW5kZXggPSB0eXBlb2YgY29sdW1uLmluZGV4ID09PSBcIm51bWJlclwiID8gY29sdW1uLmluZGV4ICsgMSA6IChjaSArIDEpO1xuICAgICAgICAgaWYgKGNvbHVtbi53aWR0aCA9PT0gMCkge1xuICAgICAgICAgICByZXR1cm4gYDxjb2wgJHtkZWZhdWx0Q2VsbFN0eWxlSWQgIT0gbnVsbCA/IGBzdHlsZT1cIiR7ZGVmYXVsdENlbGxTdHlsZUlkfVwiYCA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWluPVwiJHtjb2x1bW5JbmRleH1cIiBtYXg9XCIke2NvbHVtbkluZGV4fVwiIGhpZGRlbj1cIjFcIiBjdXN0b21XaWR0aD1cIjFcIiAvPmA7XG4gICAgICAgICB9XG4gICAgICAgICByZXR1cm4gYDxjb2wgJHtkZWZhdWx0Q2VsbFN0eWxlSWQgIT0gbnVsbCA/IGBzdHlsZT1cIiR7ZGVmYXVsdENlbGxTdHlsZUlkfVwiYCA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgIG1pbj1cIiR7Y29sdW1uSW5kZXh9XCIgbWF4PVwiJHtjb2x1bW5JbmRleH1cIiBjdXN0b21XaWR0aD1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICR7Y29sdW1uLmF1dG9XaWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGB3aWR0aD1cIiR7KChjb2x1bW4ud2lkdGggKiA3ICsgNSkgLyA3ICogMjU2KSAvIDI1Nn1cIiBiZXN0Rml0PVwiMVwiYFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGB3aWR0aD1cIiR7dG9XaWR0aChjb2x1bW4ud2lkdGgpfVwiYH0gLz5gO1xuICAgICAgIH0pfVxuICAgICA8L2NvbHM+YCA6ICcnfVxuXG4gICA8c2hlZXREYXRhPlxuICAgICAke2ZvcmVhY2goZGF0YSwgKHJvdywgcmkpID0+IHtcbiAgICAgICBjb25zdCByb3dJbmRleCA9IHR5cGVvZiByb3cuaW5kZXggPT09IFwibnVtYmVyXCIgPyByb3cuaW5kZXggKyAxIDogKHJpICsgMSk7XG4gICAgICAgcmV0dXJuIGBcbiAgICAgICAgIDxyb3cgcj1cIiR7cm93SW5kZXh9XCIgeDE0YWM6ZHlEZXNjZW50PVwiMC4yNVwiXG4gICAgICAgICAgICAgICR7cm93LmhlaWdodCA9PT0gMCA/ICdoaWRkZW49XCIxXCInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJvdy5oZWlnaHQgPyBgaHQ9XCIke3RvSGVpZ2h0KHJvdy5oZWlnaHQpfVwiIGN1c3RvbUhlaWdodD1cIjFcImAgOiBcIlwifT5cbiAgICAgICAgICAgJHtmb3JlYWNoKHJvdy5kYXRhLCAoY2VsbCkgPT4gYFxuICAgICAgICAgICAgIDxjIHI9XCIke2NlbGwucmVmfVwiICR7Y2VsbC5zdHlsZSA/IGBzPVwiJHtjZWxsLnN0eWxlfVwiYCA6ICcnfSAke2NlbGwudHlwZSA/IGB0PVwiJHtjZWxsLnR5cGV9XCJgIDogJyd9PlxuICAgICAgICAgICAgICAgJHtjZWxsLmZvcm11bGEgIT0gbnVsbCA/IHdyaXRlRm9ybXVsYShjZWxsLmZvcm11bGEpIDogJyd9XG4gICAgICAgICAgICAgICAke2NlbGwudmFsdWUgIT0gbnVsbCA/IGA8dj4ke0VTQyhjZWxsLnZhbHVlKX08L3Y+YCA6ICcnfVxuICAgICAgICAgICAgIDwvYz5gKX1cbiAgICAgICAgIDwvcm93PlxuICAgICAgIGA7fSl9XG4gICA8L3NoZWV0RGF0YT5cblxuICAgJHthdXRvRmlsdGVyID8gYDxhdXRvRmlsdGVyIHJlZj1cIiR7YXV0b0ZpbHRlci5mcm9tfToke2F1dG9GaWx0ZXIudG99XCIvPmBcbiAgICAgICAgICAgICAgICA6IGZpbHRlciA/IHNwcmVhZHNoZWV0RmlsdGVycyhmaWx0ZXIpIDogJyd9XG5cbiAgICR7bWVyZ2VDZWxscy5sZW5ndGggPyBgXG4gICAgIDxtZXJnZUNlbGxzIGNvdW50PVwiJHttZXJnZUNlbGxzLmxlbmd0aH1cIj5cbiAgICAgICAke2ZvcmVhY2gobWVyZ2VDZWxscywgKHJlZikgPT4gYDxtZXJnZUNlbGwgcmVmPVwiJHtyZWZ9XCIvPmApfVxuICAgICA8L21lcmdlQ2VsbHM+YCA6ICcnfVxuXG4gICAke3ZhbGlkYXRpb25zLmxlbmd0aCA/IGBcbiAgICAgPGRhdGFWYWxpZGF0aW9ucz5cbiAgICAgICAke2ZvcmVhY2godmFsaWRhdGlvbnMsICh2YWwpID0+IGBcbiAgICAgICAgIDxkYXRhVmFsaWRhdGlvbiBzcXJlZj1cIiR7dmFsLnNxcmVmLmpvaW4oXCIgXCIpfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Vycm9yTWVzc2FnZT1cIiR7dmFsLnNob3dFcnJvck1lc3NhZ2V9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiJHtFU0ModmFsLnR5cGUpfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgJHsgdmFsLnR5cGUgIT09IFwibGlzdFwiID8gYG9wZXJhdG9yPVwiJHtFU0ModmFsLm9wZXJhdG9yKX1cImAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd0JsYW5rPVwiJHt2YWwuYWxsb3dCbGFua31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEcm9wRG93bj1cIiR7dmFsLnNob3dEcm9wRG93bn1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICR7dmFsLmVycm9yID8gYGVycm9yPVwiJHtFU0ModmFsLmVycm9yKX1cImAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAke3ZhbC5lcnJvclRpdGxlID8gYGVycm9yVGl0bGU9XCIke0VTQyh2YWwuZXJyb3JUaXRsZSl9XCJgIDogJyd9PlxuICAgICAgICAgICAke3ZhbC5mb3JtdWxhMSA/IGA8Zm9ybXVsYTE+JHtFU0ModmFsLmZvcm11bGExKX08L2Zvcm11bGExPmAgOiAnJ31cbiAgICAgICAgICAgJHt2YWwuZm9ybXVsYTIgPyBgPGZvcm11bGEyPiR7RVNDKHZhbC5mb3JtdWxhMil9PC9mb3JtdWxhMj5gIDogJyd9XG4gICAgICAgICA8L2RhdGFWYWxpZGF0aW9uPmApfVxuICAgICA8L2RhdGFWYWxpZGF0aW9ucz5gIDogJyd9XG5cbiAgICR7aHlwZXJsaW5rcy5sZW5ndGggPyBgXG4gICAgIDxoeXBlcmxpbmtzPlxuICAgICAgICR7Zm9yZWFjaChoeXBlcmxpbmtzLCAobGluaywgaGkpID0+IGBcbiAgICAgICAgIDxoeXBlcmxpbmsgcmVmPVwiJHtsaW5rLnJlZn1cIiByOmlkPVwicklkJHtoaX1cIi8+YCl9XG4gICAgIDwvaHlwZXJsaW5rcz5gIDogJyd9XG5cbiAgIDxwYWdlTWFyZ2lucyBsZWZ0PVwiMC43XCIgcmlnaHQ9XCIwLjdcIiB0b3A9XCIwLjc1XCIgYm90dG9tPVwiMC43NVwiIGhlYWRlcj1cIjAuM1wiIGZvb3Rlcj1cIjAuM1wiIC8+XG48L3dvcmtzaGVldD5gO1xuXG5jb25zdCBXT1JLQk9PS19SRUxTID0gKHsgY291bnQgfSkgPT4gYCR7WE1MSEVBRH1cbjxSZWxhdGlvbnNoaXBzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzXCI+XG4gICR7cmVwZWF0KGNvdW50LCAoaWR4KSA9PiBgXG4gICAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZCR7aWR4ICsgMX1cIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy93b3Jrc2hlZXRcIiBUYXJnZXQ9XCJ3b3Jrc2hlZXRzL3NoZWV0JHtpZHggKyAxfS54bWxcIiAvPmApfVxuICA8UmVsYXRpb25zaGlwIElkPVwicklkJHtjb3VudCArIDF9XCIgVHlwZT1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvc3R5bGVzXCIgVGFyZ2V0PVwic3R5bGVzLnhtbFwiIC8+XG4gIDxSZWxhdGlvbnNoaXAgSWQ9XCJySWQke2NvdW50ICsgMn1cIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9zaGFyZWRTdHJpbmdzXCIgVGFyZ2V0PVwic2hhcmVkU3RyaW5ncy54bWxcIiAvPlxuPC9SZWxhdGlvbnNoaXBzPmA7XG5cbmNvbnN0IFdPUktTSEVFVF9SRUxTID0gKHsgaHlwZXJsaW5rcyB9KSA9PiBgJHtYTUxIRUFEfVxuPFJlbGF0aW9uc2hpcHMgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHNcIj5cbiAgJHtmb3JlYWNoKGh5cGVybGlua3MsIChsaW5rLCBpKSA9PiBgXG4gICAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZCR7aX1cIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9oeXBlcmxpbmtcIiBUYXJnZXQ9XCIke0VTQyhsaW5rLnRhcmdldCl9XCIgVGFyZ2V0TW9kZT1cIkV4dGVybmFsXCIgLz5gKX1cbjwvUmVsYXRpb25zaGlwcz5gO1xuXG5jb25zdCBTSEFSRURfU1RSSU5HUyA9ICh7IGNvdW50LCB1bmlxdWVDb3VudCwgaW5kZXhlcyB9KSA9PiBgJHtYTUxIRUFEfVxuPHNzdCB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiIGNvdW50PVwiJHtjb3VudH1cIiB1bmlxdWVDb3VudD1cIiR7dW5pcXVlQ291bnR9XCI+XG4gICR7Zm9yZWFjaChPYmplY3Qua2V5cyhpbmRleGVzKSwgKGluZGV4KSA9PiBgXG4gICAgPHNpPjx0IHhtbDpzcGFjZT1cInByZXNlcnZlXCI+JHtFU0MoaW5kZXguc3Vic3RyaW5nKDEpKX08L3Q+PC9zaT5gKX1cbjwvc3N0PmA7XG5cbmNvbnN0IFNUWUxFUyA9ICh7XG4gICAgZm9ybWF0cyxcbiAgICBmb250cyxcbiAgICBmaWxscyxcbiAgICBib3JkZXJzLFxuICAgIHN0eWxlc1xufSkgPT4gYCR7WE1MSEVBRH1cbjxzdHlsZVNoZWV0XG4gICAgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIlxuICAgIHhtbG5zOm1jPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL21hcmt1cC1jb21wYXRpYmlsaXR5LzIwMDZcIlxuICAgIG1jOklnbm9yYWJsZT1cIngxNGFjXCJcbiAgICB4bWxuczp4MTRhYz1cImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL3NwcmVhZHNoZWV0bWwvMjAwOS85L2FjXCI+XG4gIDxudW1GbXRzIGNvdW50PVwiJHtmb3JtYXRzLmxlbmd0aH1cIj5cbiAgJHtmb3JlYWNoKGZvcm1hdHMsIChmb3JtYXQsIGZpKSA9PiBgXG4gICAgPG51bUZtdCBmb3JtYXRDb2RlPVwiJHtFU0MoZm9ybWF0LmZvcm1hdCl9XCIgbnVtRm10SWQ9XCIkezE2NSArIGZpfVwiIC8+YCl9XG4gIDwvbnVtRm10cz5cbiAgPGZvbnRzIGNvdW50PVwiJHtmb250cy5sZW5ndGggKyAxfVwiIHgxNGFjOmtub3duRm9udHM9XCIxXCI+XG4gICAgPGZvbnQ+XG4gICAgICAgPHN6IHZhbD1cIjExXCIgLz5cbiAgICAgICA8Y29sb3IgdGhlbWU9XCIxXCIgLz5cbiAgICAgICA8bmFtZSB2YWw9XCJDYWxpYnJpXCIgLz5cbiAgICAgICA8ZmFtaWx5IHZhbD1cIjJcIiAvPlxuICAgICAgIDxzY2hlbWUgdmFsPVwibWlub3JcIiAvPlxuICAgIDwvZm9udD5cbiAgICAke2ZvcmVhY2goZm9udHMsIChmb250KSA9PiBgXG4gICAgPGZvbnQ+XG4gICAgICA8c3ogdmFsPVwiJHtmb250LmZvbnRTaXplIHx8IDExfVwiIC8+XG4gICAgICAke2ZvbnQuYm9sZCA/ICc8Yi8+JyA6ICcnfVxuICAgICAgJHtmb250Lml0YWxpYyA/ICc8aS8+JyA6ICcnfVxuICAgICAgJHtmb250LnVuZGVybGluZSA/ICc8dS8+JyA6ICcnfVxuICAgICAgJHtmb250LmNvbG9yID8gYDxjb2xvciByZ2I9XCIke0VTQyhmb250LmNvbG9yKX1cIiAvPmAgOiAnPGNvbG9yIHRoZW1lPVwiMVwiIC8+J31cbiAgICAgICR7Zm9udC5mb250RmFtaWx5ID8gYFxuICAgICAgICA8bmFtZSB2YWw9XCIke0VTQyhmb250LmZvbnRGYW1pbHkpfVwiIC8+XG4gICAgICAgIDxmYW1pbHkgdmFsPVwiMlwiIC8+XG4gICAgICBgIDogYFxuICAgICAgICA8bmFtZSB2YWw9XCJDYWxpYnJpXCIgLz5cbiAgICAgICAgPGZhbWlseSB2YWw9XCIyXCIgLz5cbiAgICAgICAgPHNjaGVtZSB2YWw9XCJtaW5vclwiIC8+XG4gICAgICBgfVxuICAgIDwvZm9udD5gKX1cbiAgPC9mb250cz5cbiAgPGZpbGxzIGNvdW50PVwiJHtmaWxscy5sZW5ndGggKyAyfVwiPlxuICAgICAgPGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPVwibm9uZVwiLz48L2ZpbGw+XG4gICAgICA8ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9XCJncmF5MTI1XCIvPjwvZmlsbD5cbiAgICAke2ZvcmVhY2goZmlsbHMsIChmaWxsKSA9PiBgXG4gICAgICAke2ZpbGwuYmFja2dyb3VuZCA/IGBcbiAgICAgICAgPGZpbGw+XG4gICAgICAgICAgPHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPVwic29saWRcIj5cbiAgICAgICAgICAgICAgPGZnQ29sb3IgcmdiPVwiJHtFU0MoZmlsbC5iYWNrZ3JvdW5kKX1cIi8+XG4gICAgICAgICAgPC9wYXR0ZXJuRmlsbD5cbiAgICAgICAgPC9maWxsPlxuICAgICAgYCA6ICcnfWApfVxuICA8L2ZpbGxzPlxuICA8Ym9yZGVycyBjb3VudD1cIiR7Ym9yZGVycy5sZW5ndGggKyAxfVwiPlxuICAgIDxib3JkZXI+PGxlZnQvPjxyaWdodC8+PHRvcC8+PGJvdHRvbS8+PGRpYWdvbmFsLz48L2JvcmRlcj5cbiAgICAke2ZvcmVhY2goYm9yZGVycywgYm9yZGVyVGVtcGxhdGUpfVxuICA8L2JvcmRlcnM+XG4gIDxjZWxsU3R5bGVYZnMgY291bnQ9XCIxXCI+XG4gICAgPHhmIGJvcmRlcklkPVwiMFwiIGZpbGxJZD1cIjBcIiBmb250SWQ9XCIwXCIgLz5cbiAgPC9jZWxsU3R5bGVYZnM+XG4gIDxjZWxsWGZzIGNvdW50PVwiJHtzdHlsZXMubGVuZ3RoICsgMX1cIj5cbiAgICA8eGYgbnVtRm10SWQ9XCIwXCIgZm9udElkPVwiMFwiIGZpbGxJZD1cIjBcIiBib3JkZXJJZD1cIjBcIiB4ZklkPVwiMFwiIC8+XG4gICAgJHtmb3JlYWNoKHN0eWxlcywgKHN0eWxlKSA9PiBgXG4gICAgICA8eGYgeGZJZD1cIjBcIlxuICAgICAgICAgICR7c3R5bGUuZm9udElkID8gYGZvbnRJZD1cIiR7c3R5bGUuZm9udElkfVwiIGFwcGx5Rm9udD1cIjFcImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLmZpbGxJZCA/IGBmaWxsSWQ9XCIke3N0eWxlLmZpbGxJZH1cIiBhcHBseUZpbGw9XCIxXCJgIDogJyd9XG4gICAgICAgICAgJHtzdHlsZS5udW1GbXRJZCA/IGBudW1GbXRJZD1cIiR7c3R5bGUubnVtRm10SWR9XCIgYXBwbHlOdW1iZXJGb3JtYXQ9XCIxXCJgIDogJyd9XG4gICAgICAgICAgJHtzdHlsZS50ZXh0QWxpZ24gfHwgc3R5bGUudmVydGljYWxBbGlnbiB8fCBzdHlsZS53cmFwID8gJ2FwcGx5QWxpZ25tZW50PVwiMVwiJyA6ICcnfVxuICAgICAgICAgICR7c3R5bGUuYm9yZGVySWQgPyBgYm9yZGVySWQ9XCIke3N0eWxlLmJvcmRlcklkfVwiIGFwcGx5Qm9yZGVyPVwiMVwiYCA6ICcnfT5cbiAgICAgICAgJHtzdHlsZS50ZXh0QWxpZ24gfHwgc3R5bGUudmVydGljYWxBbGlnbiB8fCBzdHlsZS53cmFwID8gYFxuICAgICAgICA8YWxpZ25tZW50XG4gICAgICAgICAgJHtzdHlsZS50ZXh0QWxpZ24gPyBgaG9yaXpvbnRhbD1cIiR7RVNDKHN0eWxlLnRleHRBbGlnbil9XCJgIDogJyd9XG4gICAgICAgICAgJHtzdHlsZS52ZXJ0aWNhbEFsaWduID8gYHZlcnRpY2FsPVwiJHtFU0Moc3R5bGUudmVydGljYWxBbGlnbil9XCJgIDogJyd9XG4gICAgICAgICAgJHtzdHlsZS53cmFwID8gJ3dyYXBUZXh0PVwiMVwiJyA6ICcnfSAvPlxuICAgICAgICBgIDogJyd9XG4gICAgICA8L3hmPlxuICAgIGApfVxuICA8L2NlbGxYZnM+XG4gIDxjZWxsU3R5bGVzIGNvdW50PVwiMVwiPlxuICAgIDxjZWxsU3R5bGUgbmFtZT1cIk5vcm1hbFwiIHhmSWQ9XCIwXCIgYnVpbHRpbklkPVwiMFwiLz5cbiAgPC9jZWxsU3R5bGVzPlxuICA8ZHhmcyBjb3VudD1cIjBcIiAvPlxuICA8dGFibGVTdHlsZXMgY291bnQ9XCIwXCIgZGVmYXVsdFRhYmxlU3R5bGU9XCJUYWJsZVN0eWxlTWVkaXVtMlwiIGRlZmF1bHRQaXZvdFN0eWxlPVwiUGl2b3RTdHlsZU1lZGl1bTlcIiAvPlxuPC9zdHlsZVNoZWV0PmA7XG5cbmZ1bmN0aW9uIHdyaXRlRm9ybXVsYShmb3JtdWxhKSB7XG4gICAgaWYgKHR5cGVvZiBmb3JtdWxhID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIGA8Zj4ke0VTQyhmb3JtdWxhKX08L2Y+YDtcbiAgICB9XG4gICAgLy8gYXJyYXkgZm9ybXVsYXNcbiAgICByZXR1cm4gYDxmIHQ9XCJhcnJheVwiIHJlZj1cIiR7Zm9ybXVsYS5yZWZ9XCI+JHtFU0MoZm9ybXVsYS5zcmMpfTwvZj5gO1xufVxuXG5mdW5jdGlvbiBudW1DaGFyKGNvbEluZGV4KSB7XG4gICBjb25zdCBsZXR0ZXIgPSBNYXRoLmZsb29yKGNvbEluZGV4IC8gMjYpIC0gMTtcblxuICAgcmV0dXJuIChsZXR0ZXIgPj0gMCA/IG51bUNoYXIobGV0dGVyKSA6IFwiXCIpICsgU3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIChjb2xJbmRleCAlIDI2KSk7XG59XG5cbmZ1bmN0aW9uIHJlZihyb3dJbmRleCwgY29sSW5kZXgpIHtcbiAgICByZXR1cm4gbnVtQ2hhcihjb2xJbmRleCkgKyAocm93SW5kZXggKyAxKTtcbn1cblxuZnVuY3Rpb24gJHJlZihyb3dJbmRleCwgY29sSW5kZXgpIHtcbiAgICByZXR1cm4gXCIkXCIgKyBudW1DaGFyKGNvbEluZGV4KSArIFwiJFwiICsgKHJvd0luZGV4ICsgMSk7XG59XG5cbmZ1bmN0aW9uIGZpbHRlclJvd0luZGV4KG9wdGlvbnMpIHtcbiAgICBjb25zdCBmcm96ZW5Sb3dzID0gb3B0aW9ucy5mcm96ZW5Sb3dzIHx8IChvcHRpb25zLmZyZWV6ZVBhbmUgfHwge30pLnJvd1NwbGl0IHx8IDE7XG4gICAgcmV0dXJuIGZyb3plblJvd3MgLSAxO1xufVxuXG5mdW5jdGlvbiB0b1dpZHRoKHB4KSB7XG4gICAgcmV0dXJuICgocHggLyA3KSAqIDEwMCArIDAuNSkgLyAxMDA7XG59XG5cbmZ1bmN0aW9uIHRvSGVpZ2h0KHB4KSB7XG4gICAgcmV0dXJuIHB4ICogMC43NTtcbn1cblxuZnVuY3Rpb24gc3RyaXBGdW5ueUNoYXJzKHZhbHVlKSB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSlcbiAgICAgICAgLnJlcGxhY2UoL1tcXHgwMC1cXHgwOF0vZywgXCJcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcbi9nLCBcIlxcclxcblwiKTtcbn1cblxuY29uc3QgREFURV9FUE9DSCA9IG5ldyBEYXRlKDE5MDAsIDAsIDApO1xuXG5jbGFzcyBXb3Jrc2hlZXQge1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgc2hhcmVkU3RyaW5ncywgc3R5bGVzLCBib3JkZXJzKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuX3N0cmluZ3MgPSBzaGFyZWRTdHJpbmdzO1xuICAgICAgICB0aGlzLl9zdHlsZXMgPSBzdHlsZXM7XG4gICAgICAgIHRoaXMuX2JvcmRlcnMgPSBib3JkZXJzO1xuICAgICAgICB0aGlzLl92YWxpZGF0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIHJlbHNUb1hNTCgpIHtcbiAgICAgICAgY29uc3QgaHlwZXJsaW5rcyA9IHRoaXMub3B0aW9ucy5oeXBlcmxpbmtzIHx8IFtdO1xuICAgICAgICBpZiAoIWh5cGVybGlua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBXT1JLU0hFRVRfUkVMUyh7IGh5cGVybGlua3M6IGh5cGVybGlua3MgfSk7XG4gICAgfVxuXG4gICAgdG9YTUwoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VDZWxscyA9IHRoaXMub3B0aW9ucy5tZXJnZWRDZWxscyB8fCBbXTtcbiAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMub3B0aW9ucy5yb3dzIHx8IFtdO1xuICAgICAgICBjb25zdCBkYXRhID0gaW5mbGF0ZShyb3dzLCBtZXJnZUNlbGxzKTtcblxuICAgICAgICB0aGlzLl9yZWFkQ2VsbHMoZGF0YSk7XG5cbiAgICAgICAgbGV0IGF1dG9GaWx0ZXIgPSB0aGlzLm9wdGlvbnMuZmlsdGVyO1xuICAgICAgICBsZXQgZmlsdGVyO1xuICAgICAgICBpZiAoYXV0b0ZpbHRlciAmJiAodHlwZW9mIGF1dG9GaWx0ZXIuZnJvbSA9PT0gXCJudW1iZXJcIikgJiYgKHR5cGVvZiBhdXRvRmlsdGVyLnRvID09PSBcIm51bWJlclwiKSkge1xuICAgICAgICAgICAgLy8gR3JpZCBlbmFibGVzIGF1dG8gZmlsdGVyXG4gICAgICAgICAgICBhdXRvRmlsdGVyID0ge1xuICAgICAgICAgICAgICAgIGZyb206IHJlZihmaWx0ZXJSb3dJbmRleCh0aGlzLm9wdGlvbnMpLCBhdXRvRmlsdGVyLmZyb20pLFxuICAgICAgICAgICAgICAgIHRvOiByZWYoZmlsdGVyUm93SW5kZXgodGhpcy5vcHRpb25zKSwgYXV0b0ZpbHRlci50bylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoYXV0b0ZpbHRlciAmJiBhdXRvRmlsdGVyLnJlZiAmJiBhdXRvRmlsdGVyLmNvbHVtbnMpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgcHJvYmFibHkgZnJvbSB0aGUgU3ByZWFkc2hlZXRcbiAgICAgICAgICAgIGZpbHRlciA9IGF1dG9GaWx0ZXI7XG4gICAgICAgICAgICBhdXRvRmlsdGVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25zID0gW107XG4gICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5fdmFsaWRhdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5fdmFsaWRhdGlvbnMsIGkpKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbnMucHVzaCh0aGlzLl92YWxpZGF0aW9uc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGVmYXVsdENlbGxTdHlsZUlkID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kZWZhdWx0Q2VsbFN0eWxlKSB7XG4gICAgICAgICAgICBkZWZhdWx0Q2VsbFN0eWxlSWQgPSB0aGlzLl9sb29rdXBTdHlsZSh0aGlzLm9wdGlvbnMuZGVmYXVsdENlbGxTdHlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmcmVlemVQYW5lID0gdGhpcy5vcHRpb25zLmZyZWV6ZVBhbmUgfHwge307XG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0gdGhpcy5vcHRpb25zLmRlZmF1bHRzIHx8IHt9O1xuICAgICAgICByZXR1cm4gV09SS1NIRUVUKHtcbiAgICAgICAgICAgIGZyb3plbkNvbHVtbnM6IHRoaXMub3B0aW9ucy5mcm96ZW5Db2x1bW5zIHx8IGZyZWV6ZVBhbmUuY29sU3BsaXQsXG4gICAgICAgICAgICBmcm96ZW5Sb3dzOiB0aGlzLm9wdGlvbnMuZnJvemVuUm93cyB8fCBmcmVlemVQYW5lLnJvd1NwbGl0LFxuICAgICAgICAgICAgY29sdW1uczogdGhpcy5vcHRpb25zLmNvbHVtbnMsXG4gICAgICAgICAgICBkZWZhdWx0czogZGVmYXVsdHMsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgbWVyZ2VDZWxsczogbWVyZ2VDZWxscyxcbiAgICAgICAgICAgIGF1dG9GaWx0ZXI6IGF1dG9GaWx0ZXIsXG4gICAgICAgICAgICBmaWx0ZXI6IGZpbHRlcixcbiAgICAgICAgICAgIHNob3dHcmlkTGluZXM6IHRoaXMub3B0aW9ucy5zaG93R3JpZExpbmVzLFxuICAgICAgICAgICAgaHlwZXJsaW5rczogdGhpcy5vcHRpb25zLmh5cGVybGlua3MgfHwgW10sXG4gICAgICAgICAgICB2YWxpZGF0aW9uczogdmFsaWRhdGlvbnMsXG4gICAgICAgICAgICBkZWZhdWx0Q2VsbFN0eWxlSWQ6IGRlZmF1bHRDZWxsU3R5bGVJZCxcbiAgICAgICAgICAgIHJ0bDogdGhpcy5vcHRpb25zLnJ0bCAhPT0gdW5kZWZpbmVkID8gdGhpcy5vcHRpb25zLnJ0bCA6IGRlZmF1bHRzLnJ0bFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfbG9va3VwU3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IFwiJFwiICsgdmFsdWU7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fc3RyaW5ncy5pbmRleGVzW2tleV07XG4gICAgICAgIGxldCByZXN1bHQ7XG5cbiAgICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGluZGV4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fc3RyaW5ncy5pbmRleGVzW2tleV0gPSB0aGlzLl9zdHJpbmdzLnVuaXF1ZUNvdW50O1xuICAgICAgICAgICAgdGhpcy5fc3RyaW5ncy51bmlxdWVDb3VudCArKztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3N0cmluZ3MuY291bnQgKys7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBfbG9va3VwU3R5bGUoc3R5bGUpIHtcbiAgICAgICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHN0eWxlKTtcblxuICAgICAgICBpZiAoanNvbiA9PT0gXCJ7fVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpbmRleCA9IGluZGV4T2YoanNvbiwgdGhpcy5fc3R5bGVzKTtcblxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX3N0eWxlcy5wdXNoKGpzb24pIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZXJlIGlzIG9uZSBkZWZhdWx0IHN0eWxlXG4gICAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgfVxuXG4gICAgX2xvb2t1cEJvcmRlcihib3JkZXIpIHtcbiAgICAgICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KGJvcmRlcik7XG4gICAgICAgIGlmIChqc29uID09PSBcInt9XCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpbmRleCA9IGluZGV4T2YoanNvbiwgdGhpcy5fYm9yZGVycyk7XG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fYm9yZGVycy5wdXNoKGpzb24pIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZXJlIGlzIG9uZSBkZWZhdWx0IGJvcmRlclxuICAgICAgICByZXR1cm4gaW5kZXggKyAxO1xuICAgIH1cblxuICAgIF9yZWFkQ2VsbHMocm93RGF0YSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd0RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd0RhdGFbaV07XG4gICAgICAgICAgICBjb25zdCBjZWxscyA9IHJvdy5jZWxscztcblxuICAgICAgICAgICAgcm93LmRhdGEgPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjZWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxEYXRhID0gdGhpcy5fY2VsbChjZWxsc1tqXSwgcm93LmluZGV4LCBqKTtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LmRhdGEucHVzaChjZWxsRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2NlbGwoZGF0YSwgcm93SW5kZXgsIGNlbGxJbmRleCkge1xuICAgICAgICBpZiAoIWRhdGEgfHwgZGF0YSA9PT0gRU1QVFlfQ0VMTCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdmFsdWUgPSBkYXRhLnZhbHVlO1xuXG4gICAgICAgIGxldCBib3JkZXIgPSB7fTtcblxuICAgICAgICBpZiAoZGF0YS5ib3JkZXJMZWZ0KSB7XG4gICAgICAgICAgICBib3JkZXIubGVmdCA9IGRhdGEuYm9yZGVyTGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhLmJvcmRlclJpZ2h0KSB7XG4gICAgICAgICAgICBib3JkZXIucmlnaHQgPSBkYXRhLmJvcmRlclJpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEuYm9yZGVyVG9wKSB7XG4gICAgICAgICAgICBib3JkZXIudG9wID0gZGF0YS5ib3JkZXJUb3A7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5ib3JkZXJCb3R0b20pIHtcbiAgICAgICAgICAgIGJvcmRlci5ib3R0b20gPSBkYXRhLmJvcmRlckJvdHRvbTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJvcmRlciA9IHRoaXMuX2xvb2t1cEJvcmRlcihib3JkZXIpO1xuXG4gICAgICAgIGNvbnN0IGRlZlN0eWxlID0gdGhpcy5vcHRpb25zLmRlZmF1bHRDZWxsU3R5bGUgfHwge307XG4gICAgICAgIGxldCBzdHlsZSA9IHsgYm9yZGVySWQ6IGJvcmRlciB9O1xuXG4gICAgICAgIChmdW5jdGlvbihhZGQpIHtcbiAgICAgICAgICAgIGFkZChcImNvbG9yXCIpO1xuICAgICAgICAgICAgYWRkKFwiYmFja2dyb3VuZFwiKTtcbiAgICAgICAgICAgIGFkZChcImJvbGRcIik7XG4gICAgICAgICAgICBhZGQoXCJpdGFsaWNcIik7XG4gICAgICAgICAgICBhZGQoXCJ1bmRlcmxpbmVcIik7XG4gICAgICAgICAgICBpZiAoIWFkZChcImZvbnRGYW1pbHlcIikpIHsgYWRkKFwiZm9udE5hbWVcIiwgXCJmb250RmFtaWx5XCIpOyB9XG4gICAgICAgICAgICBhZGQoXCJmb250U2l6ZVwiKTtcbiAgICAgICAgICAgIGFkZChcImZvcm1hdFwiKTtcbiAgICAgICAgICAgIGlmICghYWRkKFwidGV4dEFsaWduXCIpKSB7IGFkZChcImhBbGlnblwiLCBcInRleHRBbGlnblwiKTsgfVxuICAgICAgICAgICAgaWYgKCFhZGQoXCJ2ZXJ0aWNhbEFsaWduXCIpKSB7IGFkZChcInZBbGlnblwiLCBcInZlcnRpY2FsQWxpZ25cIik7IH1cbiAgICAgICAgICAgIGFkZChcIndyYXBcIik7XG4gICAgICAgIH0pKFxuICAgICAgICAgICAgZnVuY3Rpb24ocHJvcCwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbCA9IGRhdGFbcHJvcF07XG4gICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IGRlZlN0eWxlW3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVbdGFyZ2V0IHx8IHByb3BdID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY29sdW1ucyA9IHRoaXMub3B0aW9ucy5jb2x1bW5zIHx8IFtdO1xuXG4gICAgICAgIGNvbnN0IGNvbHVtbiA9IGNvbHVtbnNbY2VsbEluZGV4XTtcbiAgICAgICAgbGV0IHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cbiAgICAgICAgaWYgKGNvbHVtbiAmJiBjb2x1bW4uYXV0b1dpZHRoKSB7XG4gICAgICAgICAgICBsZXQgZGlzcGxheVZhbHVlID0gdmFsdWU7XG5cbiAgICAgICAgICAgIC8vIFhYWDogbGV0J3Mgbm90IGJyaW5nIGtlbmRvLnRvU3RyaW5nIGluIG9ubHkgZm9yIHRoaXMuXG4gICAgICAgICAgICAvLyAgICAgIGJldHRlciB3YWl0IHVudGlsIHRoZSBzcHJlYWRzaGVldCBlbmdpbmUgaXMgYXZhaWxhYmxlIGFzIGEgc2VwYXJhdGVcbiAgICAgICAgICAgIC8vICAgICAgY29tcG9uZW50LCB0aGVuIHdlIGNhbiB1c2UgYSByZWFsIEV4Y2VsLWxpa2UgZm9ybWF0dGVyLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgLy8ga2VuZG8udG9TdHJpbmcgd2lsbCBub3QgYmVoYXZlIGV4YWN0bHkgbGlrZSB0aGUgRXhjZWwgZm9ybWF0XG4gICAgICAgICAgICAgICAgLy8gU3RpbGwsIGl0J3MgdGhlIGJlc3Qgd2UgaGF2ZSBhdmFpbGFibGUgZm9yIGVzdGltYXRpbmcgdGhlIGNoYXJhY3RlciBjb3VudC5cbiAgICAgICAgICAgICAgICBkaXNwbGF5VmFsdWUgPSBJbnRsU2VydmljZS50b1N0cmluZyh2YWx1ZSwgZGF0YS5mb3JtYXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb2x1bW4ud2lkdGggPSBNYXRoLm1heChjb2x1bW4ud2lkdGggfHwgMCwgU3RyaW5nKGRpc3BsYXlWYWx1ZSkubGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHN0cmlwRnVubnlDaGFycyh2YWx1ZSk7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX2xvb2t1cFN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICB0eXBlID0gXCJzXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdHlwZSA9IFwiblwiO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICB0eXBlID0gXCJiXCI7XG4gICAgICAgICAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgdmFsdWUuZ2V0VGltZSkge1xuICAgICAgICAgICAgdHlwZSA9IG51bGw7XG5cbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9ICh2YWx1ZS5nZXRUaW1lem9uZU9mZnNldCgpIC0gREFURV9FUE9DSC5nZXRUaW1lem9uZU9mZnNldCgpKSAqIE1TX1BFUl9NSU5VVEU7XG4gICAgICAgICAgICB2YWx1ZSA9ICh2YWx1ZSAtIERBVEVfRVBPQ0ggLSBvZmZzZXQpIC8gTVNfUEVSX0RBWSArIDE7XG5cbiAgICAgICAgICAgIGlmICghc3R5bGUuZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuZm9ybWF0ID0gXCJtbS1kZC15eVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHlwZSA9IG51bGw7XG4gICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBzdHlsZSA9IHRoaXMuX2xvb2t1cFN0eWxlKHN0eWxlKTtcblxuICAgICAgICBjb25zdCBjZWxsTmFtZSA9IHJlZihyb3dJbmRleCwgY2VsbEluZGV4KTtcblxuICAgICAgICBpZiAoZGF0YS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9hZGRWYWxpZGF0aW9uKGRhdGEudmFsaWRhdGlvbiwgY2VsbE5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGZvcm11bGE6IGRhdGEuZm9ybXVsYSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgICAgICByZWY6IGNlbGxOYW1lXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2FkZFZhbGlkYXRpb24odiwgcmVmKSB7XG4gICAgICAgIGNvbnN0IHRtcCA9IHtcbiAgICAgICAgICAgIHNob3dFcnJvck1lc3NhZ2UgOiB2LnR5cGUgPT09IFwicmVqZWN0XCIgPyAxIDogMCxcbiAgICAgICAgICAgIGZvcm11bGExICAgICAgICAgOiB2LmZyb20sXG4gICAgICAgICAgICBmb3JtdWxhMiAgICAgICAgIDogdi50byxcbiAgICAgICAgICAgIHR5cGUgICAgICAgICAgICAgOiBNQVBfRVhDRUxfVFlQRVt2LmRhdGFUeXBlXSB8fCB2LmRhdGFUeXBlLFxuICAgICAgICAgICAgb3BlcmF0b3IgICAgICAgICA6IE1BUF9FWENFTF9PUEVSQVRPUlt2LmNvbXBhcmVyVHlwZV0gfHwgdi5jb21wYXJlclR5cGUsXG4gICAgICAgICAgICBhbGxvd0JsYW5rICAgICAgIDogdi5hbGxvd051bGxzID8gMSA6IDAsXG4gICAgICAgICAgICBzaG93RHJvcERvd24gICAgIDogdi5zaG93QnV0dG9uID8gMCA6IDEsIC8vIExPTCwgRXhjZWwhXG4gICAgICAgICAgICBlcnJvciAgICAgICAgICAgIDogdi5tZXNzYWdlVGVtcGxhdGUsXG4gICAgICAgICAgICBlcnJvclRpdGxlICAgICAgIDogdi50aXRsZVRlbXBsYXRlXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh0bXApO1xuICAgICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRpb25zW2pzb25dKSB7XG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uc1tqc29uXSA9IHRtcDtcbiAgICAgICAgICAgIHRtcC5zcXJlZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRpb25zW2pzb25dLnNxcmVmLnB1c2gocmVmKTtcbiAgICB9XG59XG5cbmNvbnN0IE1BUF9FWENFTF9PUEVSQVRPUiA9IHtcbiAgICAvLyBpbmNsdWRlcyBvbmx5IHdoYXQgZGlmZmVyczsga2V5IGlzIG91ciBvcGVyYXRvciwgdmFsdWUgaXMgRXhjZWxcbiAgICAvLyBvcGVyYXRvci5cbiAgICBncmVhdGVyVGhhbk9yRXF1YWxUbyA6IFwiZ3JlYXRlclRoYW5PckVxdWFsXCIsXG4gICAgbGVzc1RoYW5PckVxdWFsVG8gICAgOiBcImxlc3NUaGFuT3JFcXVhbFwiXG59O1xuXG5jb25zdCBNQVBfRVhDRUxfVFlQRSA9IHtcbiAgICBudW1iZXI6IFwiZGVjaW1hbFwiXG59O1xuXG5jb25zdCBkZWZhdWx0Rm9ybWF0cyA9IHtcbiAgICBcIkdlbmVyYWxcIjogMCxcbiAgICBcIjBcIjogMSxcbiAgICBcIjAuMDBcIjogMixcbiAgICBcIiMsIyMwXCI6IDMsXG4gICAgXCIjLCMjMC4wMFwiOiA0LFxuICAgIFwiMCVcIjogOSxcbiAgICBcIjAuMDAlXCI6IDEwLFxuICAgIFwiMC4wMEUrMDBcIjogMTEsXG4gICAgXCIjID8vP1wiOiAxMixcbiAgICBcIiMgPz8vPz9cIjogMTMsXG4gICAgXCJtbS1kZC15eVwiOiAxNCxcbiAgICBcImQtbW1tLXl5XCI6IDE1LFxuICAgIFwiZC1tbW1cIjogMTYsXG4gICAgXCJtbW0teXlcIjogMTcsXG4gICAgXCJoOm1tIEFNL1BNXCI6IDE4LFxuICAgIFwiaDptbTpzcyBBTS9QTVwiOiAxOSxcbiAgICBcImg6bW1cIjogMjAsXG4gICAgXCJoOm1tOnNzXCI6IDIxLFxuICAgIFwibS9kL3l5IGg6bW1cIjogMjIsXG4gICAgXCIjLCMjMCA7KCMsIyMwKVwiOiAzNyxcbiAgICBcIiMsIyMwIDtbUmVkXSgjLCMjMClcIjogMzgsXG4gICAgXCIjLCMjMC4wMDsoIywjIzAuMDApXCI6IDM5LFxuICAgIFwiIywjIzAuMDA7W1JlZF0oIywjIzAuMDApXCI6IDQwLFxuICAgIFwibW06c3NcIjogNDUsXG4gICAgXCJbaF06bW06c3NcIjogNDYsXG4gICAgXCJtbXNzLjBcIjogNDcsXG4gICAgXCIjIzAuMEUrMFwiOiA0OCxcbiAgICBcIkBcIjogNDksXG4gICAgXCJbJC00MDRdZS9tL2RcIjogMjcsXG4gICAgXCJtL2QveXlcIjogMzAsXG4gICAgXCJ0MFwiOiA1OSxcbiAgICBcInQwLjAwXCI6IDYwLFxuICAgIFwidCMsIyMwXCI6IDYxLFxuICAgIFwidCMsIyMwLjAwXCI6IDYyLFxuICAgIFwidDAlXCI6IDY3LFxuICAgIFwidDAuMDAlXCI6IDY4LFxuICAgIFwidCMgPy8/XCI6IDY5LFxuICAgIFwidCMgPz8vPz9cIjogNzBcbn07XG5cbmZ1bmN0aW9uIGNvbnZlcnRDb2xvcih2YWx1ZSkge1xuICAgIGxldCBjb2xvciA9IHZhbHVlO1xuICAgIGlmIChjb2xvci5sZW5ndGggPCA2KSB7XG4gICAgICAgIGNvbG9yID0gY29sb3IucmVwbGFjZSgvKFxcdykvZywgZnVuY3Rpb24oJDAsICQxKSB7XG4gICAgICAgICAgICByZXR1cm4gJDEgKyAkMTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29sb3IgPSBjb2xvci5zdWJzdHJpbmcoMSkudG9VcHBlckNhc2UoKTtcblxuICAgIGlmIChjb2xvci5sZW5ndGggPCA4KSB7XG4gICAgICAgIGNvbG9yID0gXCJGRlwiICsgY29sb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbG9yO1xufVxuXG5jbGFzcyBXb3JrYm9vayB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHRoaXMuX3N0cmluZ3MgPSB7XG4gICAgICAgICAgICBpbmRleGVzOiB7fSxcbiAgICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgICAgdW5pcXVlQ291bnQ6IDBcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fc3R5bGVzID0gW107XG4gICAgICAgIHRoaXMuX2JvcmRlcnMgPSBbXTtcblxuICAgICAgICB0aGlzLl9zaGVldHMgPSBtYXAodGhpcy5vcHRpb25zLnNoZWV0cyB8fCBbXSwgKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIG9wdGlvbnMuZGVmYXVsdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdvcmtzaGVldChvcHRpb25zLCB0aGlzLl9zdHJpbmdzLCB0aGlzLl9zdHlsZXMsIHRoaXMuX2JvcmRlcnMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0b1pJUCgpIHtcbiAgICAgICAgY29uc3QgemlwID0gY3JlYXRlWmlwKCk7XG5cbiAgICAgICAgY29uc3QgZG9jUHJvcHMgPSB6aXAuZm9sZGVyKFwiZG9jUHJvcHNcIik7XG5cbiAgICAgICAgZG9jUHJvcHMuZmlsZShcImNvcmUueG1sXCIsIENPUkUoe1xuICAgICAgICAgICAgY3JlYXRvcjogdGhpcy5vcHRpb25zLmNyZWF0b3IgfHwgXCJLZW5kbyBVSVwiLFxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkQnk6IHRoaXMub3B0aW9ucy5jcmVhdG9yIHx8IFwiS2VuZG8gVUlcIixcbiAgICAgICAgICAgIGNyZWF0ZWQ6IHRoaXMub3B0aW9ucy5kYXRlIHx8IG5ldyBEYXRlKCkudG9KU09OKCksXG4gICAgICAgICAgICBtb2RpZmllZDogdGhpcy5vcHRpb25zLmRhdGUgfHwgbmV3IERhdGUoKS50b0pTT04oKVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc3Qgc2hlZXRDb3VudCA9IHRoaXMuX3NoZWV0cy5sZW5ndGg7XG5cbiAgICAgICAgZG9jUHJvcHMuZmlsZShcImFwcC54bWxcIiwgQVBQKHsgc2hlZXRzOiB0aGlzLl9zaGVldHMgfSkpO1xuXG4gICAgICAgIGNvbnN0IHJlbHMgPSB6aXAuZm9sZGVyKFwiX3JlbHNcIik7XG4gICAgICAgIHJlbHMuZmlsZShcIi5yZWxzXCIsIFJFTFMpO1xuXG4gICAgICAgIGNvbnN0IHhsID0gemlwLmZvbGRlcihcInhsXCIpO1xuXG4gICAgICAgIGNvbnN0IHhsUmVscyA9IHhsLmZvbGRlcihcIl9yZWxzXCIpO1xuICAgICAgICB4bFJlbHMuZmlsZShcIndvcmtib29rLnhtbC5yZWxzXCIsIFdPUktCT09LX1JFTFMoeyBjb3VudDogc2hlZXRDb3VudCB9KSk7XG5cbiAgICAgICAgY29uc3Qgc2hlZXRJZHMgPSB7fTtcblxuICAgICAgICB4bC5maWxlKFwid29ya2Jvb2sueG1sXCIsIFdPUktCT09LKHtcbiAgICAgICAgICAgIHNoZWV0czogdGhpcy5fc2hlZXRzLFxuICAgICAgICAgICAgZmlsdGVyTmFtZXM6IG1hcCh0aGlzLl9zaGVldHMsIGZ1bmN0aW9uKHNoZWV0LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBzaGVldC5vcHRpb25zO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0TmFtZSA9IChvcHRpb25zLm5hbWUgfHwgb3B0aW9ucy50aXRsZSB8fCBcIlNoZWV0XCIgKyAoaW5kZXggKyAxKSk7XG4gICAgICAgICAgICAgICAgc2hlZXRJZHNbc2hlZXROYW1lLnRvTG93ZXJDYXNlKCldID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gb3B0aW9ucy5maWx0ZXI7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnJlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3ByZWFkc2hlZXQgcHJvdmlkZXMgYHJlZmBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhID0gZmlsdGVyLnJlZi5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IHBhcnNlUmVmKGFbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvID0gcGFyc2VSZWYoYVsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU2hlZXRJZDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206ICRyZWYoZnJvbS5yb3csIGZyb20uY29sKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogJHJlZih0by5yb3csIHRvLmNvbClcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpbHRlci5mcm9tICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBmaWx0ZXIudG8gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdyaWQgZG9lcyB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU2hlZXRJZDogaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206ICRyZWYoZmlsdGVyUm93SW5kZXgob3B0aW9ucyksIGZpbHRlci5mcm9tKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogJHJlZihmaWx0ZXJSb3dJbmRleChvcHRpb25zKSwgZmlsdGVyLnRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgdXNlck5hbWVzOiBtYXAodGhpcy5vcHRpb25zLm5hbWVzIHx8IFtdLCBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBkZWYubG9jYWxOYW1lLFxuICAgICAgICAgICAgICAgICAgICBsb2NhbFNoZWV0SWQ6IGRlZi5zaGVldCA/IHNoZWV0SWRzW2RlZi5zaGVldC50b0xvd2VyQ2FzZSgpXSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkZWYudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbjogZGVmLmhpZGRlblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc3Qgd29ya3NoZWV0cyA9IHhsLmZvbGRlcihcIndvcmtzaGVldHNcIik7XG5cbiAgICAgICAgY29uc3Qgc2hlZXRSZWxzID0gd29ya3NoZWV0cy5mb2xkZXIoXCJfcmVsc1wiKTtcblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBzaGVldENvdW50OyBpZHgrKykge1xuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLl9zaGVldHNbaWR4XTtcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0TmFtZSA9IGBzaGVldCR7aWR4ICsgMX0ueG1sYDtcbiAgICAgICAgICAgIGNvbnN0IHJlbHNYbWwgPSBzaGVldC5yZWxzVG9YTUwoKTtcblxuICAgICAgICAgICAgaWYgKHJlbHNYbWwpIHtcbiAgICAgICAgICAgICAgICBzaGVldFJlbHMuZmlsZShzaGVldE5hbWUgKyBcIi5yZWxzXCIsIHJlbHNYbWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3b3Jrc2hlZXRzLmZpbGUoc2hlZXROYW1lLCBzaGVldC50b1hNTChpZHgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJvcmRlcnMgPSBtYXAodGhpcy5fYm9yZGVycywgcGFyc2VKU09OKTtcblxuICAgICAgICBjb25zdCBzdHlsZXMgPSBtYXAodGhpcy5fc3R5bGVzLCBwYXJzZUpTT04pO1xuXG4gICAgICAgIGNvbnN0IGhhc0ZvbnQgPSBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0eWxlLnVuZGVybGluZSB8fCBzdHlsZS5ib2xkIHx8IHN0eWxlLml0YWxpYyB8fCBzdHlsZS5jb2xvciB8fCBzdHlsZS5mb250RmFtaWx5IHx8IHN0eWxlLmZvbnRTaXplO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZvbnRzID0gbWFwKHN0eWxlcywgZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgICAgIGlmIChzdHlsZS5jb2xvcikge1xuICAgICAgICAgICAgICAgIHN0eWxlLmNvbG9yID0gY29udmVydENvbG9yKHN0eWxlLmNvbG9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGhhc0ZvbnQoc3R5bGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmb3JtYXRzID0gbWFwKHN0eWxlcywgZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgICAgIGlmIChzdHlsZS5mb3JtYXQgJiYgZGVmYXVsdEZvcm1hdHNbc3R5bGUuZm9ybWF0XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmaWxscyA9IG1hcChzdHlsZXMsIGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgICAgICBpZiAoc3R5bGUuYmFja2dyb3VuZCkge1xuICAgICAgICAgICAgICAgIHN0eWxlLmJhY2tncm91bmQgPSBjb252ZXJ0Q29sb3Ioc3R5bGUuYmFja2dyb3VuZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB4bC5maWxlKFwic3R5bGVzLnhtbFwiLCBTVFlMRVMoe1xuICAgICAgICAgICAgZm9udHM6IGZvbnRzLFxuICAgICAgICAgICAgZmlsbHM6IGZpbGxzLFxuICAgICAgICAgICAgZm9ybWF0czogZm9ybWF0cyxcbiAgICAgICAgICAgIGJvcmRlcnM6IGJvcmRlcnMsXG4gICAgICAgICAgICBzdHlsZXM6IG1hcChzdHlsZXMsIGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG5cbiAgICAgICAgICAgICAgICBpZiAoaGFzRm9udChzdHlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZvbnRJZCA9IGluZGV4T2Yoc3R5bGUsIGZvbnRzKSArIDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLmJhY2tncm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZpbGxJZCA9IGluZGV4T2Yoc3R5bGUsIGZpbGxzKSArIDI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0LnRleHRBbGlnbiA9IHN0eWxlLnRleHRBbGlnbjtcbiAgICAgICAgICAgICAgICByZXN1bHQudmVydGljYWxBbGlnbiA9IHN0eWxlLnZlcnRpY2FsQWxpZ247XG4gICAgICAgICAgICAgICAgcmVzdWx0LndyYXAgPSBzdHlsZS53cmFwO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5ib3JkZXJJZCA9IHN0eWxlLmJvcmRlcklkO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLmZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdEZvcm1hdHNbc3R5bGUuZm9ybWF0XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubnVtRm10SWQgPSBkZWZhdWx0Rm9ybWF0c1tzdHlsZS5mb3JtYXRdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm51bUZtdElkID0gMTY1ICsgaW5kZXhPZihzdHlsZSwgZm9ybWF0cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHhsLmZpbGUoXCJzaGFyZWRTdHJpbmdzLnhtbFwiLCBTSEFSRURfU1RSSU5HUyh0aGlzLl9zdHJpbmdzKSk7XG5cbiAgICAgICAgemlwLmZpbGUoXCJbQ29udGVudF9UeXBlc10ueG1sXCIsIENPTlRFTlRfVFlQRVMoIHsgY291bnQ6IHNoZWV0Q291bnQgfSkpO1xuXG4gICAgICAgIHJldHVybiB6aXA7XG4gICAgfVxuXG4gICAgdG9EYXRhVVJMKCkge1xuICAgICAgICBjb25zdCB6aXAgPSB0aGlzLnRvWklQKCk7XG5cbiAgICAgICAgcmV0dXJuIHppcC5nZW5lcmF0ZUFzeW5jID8gemlwLmdlbmVyYXRlQXN5bmMoREFUQV9VUkxfT1BUSU9OUykudGhlbih0b0RhdGFVUkwpIDogdG9EYXRhVVJMKHppcC5nZW5lcmF0ZShEQVRBX1VSTF9PUFRJT05TKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBib3JkZXJTdHlsZSh3aWR0aCkge1xuICAgIGxldCBhbGlhcyA9IFwidGhpblwiO1xuXG4gICAgaWYgKHdpZHRoID09PSAyKSB7XG4gICAgICAgIGFsaWFzID0gXCJtZWRpdW1cIjtcbiAgICB9IGVsc2UgaWYgKHdpZHRoID09PSAzKSB7XG4gICAgICAgIGFsaWFzID0gXCJ0aGlja1wiO1xuICAgIH1cblxuICAgIHJldHVybiBhbGlhcztcbn1cblxuZnVuY3Rpb24gYm9yZGVyU2lkZVRlbXBsYXRlKG5hbWUsIHN0eWxlKSB7XG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XG5cbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgcmVzdWx0ICs9IFwiPFwiICsgbmFtZSArIFwiIHN0eWxlPVxcXCJcIiArIGJvcmRlclN0eWxlKHN0eWxlLnNpemUpICsgXCJcXFwiPlwiO1xuICAgICAgICBpZiAoc3R5bGUuY29sb3IpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBcIjxjb2xvciByZ2I9XFxcIlwiICsgY29udmVydENvbG9yKHN0eWxlLmNvbG9yKSArIFwiXFxcIi8+XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9IFwiPC9cIiArIG5hbWUgKyBcIj5cIjtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBib3JkZXJUZW1wbGF0ZShib3JkZXIpIHtcbiAgICByZXR1cm4gXCI8Ym9yZGVyPlwiICtcbiAgICAgICBib3JkZXJTaWRlVGVtcGxhdGUoXCJsZWZ0XCIsIGJvcmRlci5sZWZ0KSArXG4gICAgICAgYm9yZGVyU2lkZVRlbXBsYXRlKFwicmlnaHRcIiwgYm9yZGVyLnJpZ2h0KSArXG4gICAgICAgYm9yZGVyU2lkZVRlbXBsYXRlKFwidG9wXCIsIGJvcmRlci50b3ApICtcbiAgICAgICBib3JkZXJTaWRlVGVtcGxhdGUoXCJib3R0b21cIiwgYm9yZGVyLmJvdHRvbSkgK1xuICAgXCI8L2JvcmRlcj5cIjtcbn1cblxuY29uc3QgRU1QVFlfQ0VMTCA9IHt9O1xuZnVuY3Rpb24gaW5mbGF0ZShyb3dzLCBtZXJnZWRDZWxscykge1xuICAgIGNvbnN0IHJvd0RhdGEgPSBbXTtcbiAgICBjb25zdCByb3dzQnlJbmRleCA9IFtdO1xuXG4gICAgaW5kZXhSb3dzKHJvd3MsIGZ1bmN0aW9uKHJvdywgaW5kZXgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIF9zb3VyY2U6IHJvdyxcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICAgIGhlaWdodDogcm93LmhlaWdodCxcbiAgICAgICAgICAgIGNlbGxzOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHJvd0RhdGEucHVzaChkYXRhKTtcbiAgICAgICAgcm93c0J5SW5kZXhbaW5kZXhdID0gZGF0YTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRCeUluZGV4KHJvd0RhdGEpLnNsaWNlKDApO1xuICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgcm93RGF0YTogcm93RGF0YSxcbiAgICAgICAgcm93c0J5SW5kZXg6IHJvd3NCeUluZGV4LFxuICAgICAgICBtZXJnZWRDZWxsczogbWVyZ2VkQ2VsbHNcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmlsbENlbGxzKHNvcnRlZFtpXSwgY3R4KTtcbiAgICAgICAgZGVsZXRlIHNvcnRlZFtpXS5fc291cmNlO1xuICAgIH1cblxuICAgIHJldHVybiBzb3J0QnlJbmRleChyb3dEYXRhKTtcbn1cblxuZnVuY3Rpb24gaW5kZXhSb3dzKHJvd3MsIGNhbGxiYWNrKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHJvd3NbaV07XG4gICAgICAgIGlmICghcm93KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpbmRleCA9IHJvdy5pbmRleDtcbiAgICAgICAgaWYgKHR5cGVvZiBpbmRleCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2socm93LCBpbmRleCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzb3J0QnlJbmRleChpdGVtcykge1xuICAgIHJldHVybiBpdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBwdXNoVW5pcXVlKGFycmF5LCBlbCkge1xuICAgIGlmIChhcnJheS5pbmRleE9mKGVsKSA8IDApIHtcbiAgICAgICAgYXJyYXkucHVzaChlbCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRTcGFuKG1lcmdlZENlbGxzLCByZWYpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lcmdlZENlbGxzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlID0gbWVyZ2VkQ2VsbHNbaV07XG4gICAgICAgIGNvbnN0IGEgPSByYW5nZS5zcGxpdChcIjpcIik7XG4gICAgICAgIGxldCB0b3BMZWZ0ID0gYVswXTtcbiAgICAgICAgaWYgKHRvcExlZnQgPT09IHJlZikge1xuICAgICAgICAgICAgbGV0IGJvdHRvbVJpZ2h0ID0gYVsxXTtcbiAgICAgICAgICAgIHRvcExlZnQgPSBwYXJzZVJlZih0b3BMZWZ0KTtcbiAgICAgICAgICAgIGJvdHRvbVJpZ2h0ID0gcGFyc2VSZWYoYm90dG9tUmlnaHQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByb3dTcGFuOiBib3R0b21SaWdodC5yb3cgLSB0b3BMZWZ0LnJvdyArIDEsXG4gICAgICAgICAgICAgICAgY29sU3BhbjogYm90dG9tUmlnaHQuY29sIC0gdG9wTGVmdC5jb2wgKyAxXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZVJlZihyZWYpIHtcbiAgICBmdW5jdGlvbiBnZXRjb2woc3RyKSB7XG4gICAgICAgIGxldCB1cHBlclN0ciA9IHN0ci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBsZXQgY29sID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cHBlclN0ci5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29sID0gY29sICogMjYgKyB1cHBlclN0ci5jaGFyQ29kZUF0KGkpIC0gNjQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbCAtIDE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0cm93KHN0cikge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3RyLCAxMCkgLSAxO1xuICAgIH1cblxuICAgIGNvbnN0IG0gPSAvXihbYS16XSspKFxcZCspJC9pLmV4ZWMocmVmKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByb3c6IGdldHJvdyhtWzJdKSxcbiAgICAgICAgY29sOiBnZXRjb2wobVsxXSlcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmaWxsQ2VsbHMoZGF0YSwgY3R4KSB7XG4gICAgY29uc3Qgcm93ID0gZGF0YS5fc291cmNlO1xuICAgIGNvbnN0IHJvd0luZGV4ID0gZGF0YS5pbmRleDtcbiAgICBjb25zdCBjZWxscyA9IHJvdy5jZWxscztcbiAgICBjb25zdCBjZWxsRGF0YSA9IGRhdGEuY2VsbHM7XG5cbiAgICBpZiAoIWNlbGxzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNlbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tpXSB8fCBFTVBUWV9DRUxMO1xuXG4gICAgICAgIGxldCByb3dTcGFuID0gY2VsbC5yb3dTcGFuIHx8IDE7XG4gICAgICAgIGxldCBjb2xTcGFuID0gY2VsbC5jb2xTcGFuIHx8IDE7XG5cbiAgICAgICAgY29uc3QgY2VsbEluZGV4ID0gaW5zZXJ0Q2VsbChjZWxsRGF0YSwgY2VsbCk7XG4gICAgICAgIGNvbnN0IHRvcExlZnRSZWYgPSByZWYocm93SW5kZXgsIGNlbGxJbmRleCk7XG5cbiAgICAgICAgaWYgKHJvd1NwYW4gPT09IDEgJiYgY29sU3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgLy8gY291bGQgc3RpbGwgYmUgbWVyZ2VkOiB0aGUgc3ByZWFkc2hlZXQgZG9lcyBub3Qgc2VuZFxuICAgICAgICAgICAgLy8gcm93U3Bhbi9jb2xTcGFuLCBidXQgbWVyZ2VkQ2VsbHMgaXMgYWxyZWFkeSBwb3B1bGF0ZWQuXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdGVsZXJpay9rZW5kby11aS1jb3JlL2lzc3Vlcy8yNDAxXG4gICAgICAgICAgICBjb25zdCB0bXAgPSBnZXRTcGFuKGN0eC5tZXJnZWRDZWxscywgdG9wTGVmdFJlZik7XG4gICAgICAgICAgICBpZiAodG1wKSB7XG4gICAgICAgICAgICAgICAgY29sU3BhbiA9IHRtcC5jb2xTcGFuO1xuICAgICAgICAgICAgICAgIHJvd1NwYW4gPSB0bXAucm93U3BhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNwYW5DZWxsKGNlbGwsIGNlbGxEYXRhLCBjZWxsSW5kZXgsIGNvbFNwYW4pO1xuXG4gICAgICAgIGlmIChyb3dTcGFuID4gMSB8fCBjb2xTcGFuID4gMSkge1xuICAgICAgICAgICAgcHVzaFVuaXF1ZShjdHgubWVyZ2VkQ2VsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgIHRvcExlZnRSZWYgKyBcIjpcIiArIHJlZihyb3dJbmRleCArIHJvd1NwYW4gLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxJbmRleCArIGNvbFNwYW4gLSAxKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocm93U3BhbiA+IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHJpID0gcm93SW5kZXggKyAxOyByaSA8IHJvd0luZGV4ICsgcm93U3BhbjsgcmkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0Um93ID0gY3R4LnJvd3NCeUluZGV4W3JpXTtcbiAgICAgICAgICAgICAgICBpZiAoIW5leHRSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFJvdyA9IGN0eC5yb3dzQnlJbmRleFtyaV0gPSB7IGluZGV4OiByaSwgY2VsbHM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgIGN0eC5yb3dEYXRhLnB1c2gobmV4dFJvdyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3BhbkNlbGwoY2VsbCwgbmV4dFJvdy5jZWxscywgY2VsbEluZGV4IC0gMSwgY29sU3BhbiArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbnNlcnRDZWxsKGRhdGEsIGNlbGwpIHtcbiAgICBsZXQgaW5kZXg7XG5cbiAgICBpZiAodHlwZW9mIGNlbGwuaW5kZXggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgaW5kZXggPSBjZWxsLmluZGV4O1xuICAgICAgICBpbnNlcnRDZWxsQXQoZGF0YSwgY2VsbCwgY2VsbC5pbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaW5kZXggPSBhcHBlbmRDZWxsKGRhdGEsIGNlbGwpO1xuICAgIH1cblxuICAgIHJldHVybiBpbmRleDtcbn1cblxuZnVuY3Rpb24gaW5zZXJ0Q2VsbEF0KGRhdGEsIGNlbGwsIGluZGV4KSB7XG4gICAgZGF0YVtpbmRleF0gPSBjZWxsO1xufVxuXG5mdW5jdGlvbiBhcHBlbmRDZWxsKGRhdGEsIGNlbGwpIHtcbiAgICBsZXQgaW5kZXggPSBkYXRhLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGggKyAxOyBpKyspIHtcbiAgICAgICAgaWYgKCFkYXRhW2ldKSB7XG4gICAgICAgICAgICBkYXRhW2ldID0gY2VsbDtcbiAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xufVxuXG5mdW5jdGlvbiBzcGFuQ2VsbChjZWxsLCByb3csIHN0YXJ0SW5kZXgsIGNvbFNwYW4pIHtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNvbFNwYW47IGkrKykge1xuICAgICAgICBjb25zdCB0bXAgPSB7XG4gICAgICAgICAgICBib3JkZXJUb3AgICAgOiBjZWxsLmJvcmRlclRvcCxcbiAgICAgICAgICAgIGJvcmRlclJpZ2h0ICA6IGNlbGwuYm9yZGVyUmlnaHQsXG4gICAgICAgICAgICBib3JkZXJCb3R0b20gOiBjZWxsLmJvcmRlckJvdHRvbSxcbiAgICAgICAgICAgIGJvcmRlckxlZnQgICA6IGNlbGwuYm9yZGVyTGVmdFxuICAgICAgICB9O1xuICAgICAgICBpbnNlcnRDZWxsQXQocm93LCB0bXAsIHN0YXJ0SW5kZXggKyBpKTtcbiAgICB9XG59XG5cbmNvbnN0IFNQUkVBRFNIRUVUX0ZJTFRFUlMgPSAoeyByZWYsIGNvbHVtbnMsIGdlbmVyYXRvcnMgfSkgPT4gYFxuPGF1dG9GaWx0ZXIgcmVmPVwiJHtyZWZ9XCI+XG4gICR7Zm9yZWFjaChjb2x1bW5zLCAoY29sKSA9PiBgXG4gICAgPGZpbHRlckNvbHVtbiBjb2xJZD1cIiR7Y29sLmluZGV4fVwiPlxuICAgICAgJHtnZW5lcmF0b3JzW2NvbC5maWx0ZXJdKGNvbCl9XG4gICAgPC9maWx0ZXJDb2x1bW4+XG4gIGApfVxuPC9hdXRvRmlsdGVyPmA7XG5cbmNvbnN0IFNQUkVBRFNIRUVUX0NVU1RPTV9GSUxURVIgPSAoeyBsb2dpYywgY3JpdGVyaWEgfSkgPT4gYFxuPGN1c3RvbUZpbHRlcnMgJHtsb2dpYyA9PT0gJ2FuZCcgPyAnYW5kPVwiMVwiJyA6ICcnfT5cbiR7Zm9yZWFjaChjcml0ZXJpYSwgKGYpID0+IHtcbiAgICBsZXQgb3AgPSBzcHJlYWRzaGVldEZpbHRlcnMuY3VzdG9tT3BlcmF0b3IoZik7XG4gICAgbGV0IHZhbCA9IHNwcmVhZHNoZWV0RmlsdGVycy5jdXN0b21WYWx1ZShmKTtcbiAgICByZXR1cm4gYDxjdXN0b21GaWx0ZXIgJHtvcCA/IGBvcGVyYXRvcj1cIiR7b3B9XCJgIDogJyd9IHZhbD1cIiR7dmFsfVwiLz5gO1xufSl9XG48L2N1c3RvbUZpbHRlcnM+YDtcblxuY29uc3QgU1BSRUFEU0hFRVRfRFlOQU1JQ19GSUxURVIgPSAoeyB0eXBlIH0pID0+XG5gPGR5bmFtaWNGaWx0ZXIgdHlwZT1cIiR7c3ByZWFkc2hlZXRGaWx0ZXJzLmR5bmFtaWNGaWx0ZXJUeXBlKHR5cGUpfVwiIC8+YDtcblxuY29uc3QgU1BSRUFEU0hFRVRfVE9QX0ZJTFRFUiA9ICh7IHR5cGUsIHZhbHVlIH0pID0+XG5gPHRvcDEwIHBlcmNlbnQ9XCIkey9wZXJjZW50JC9pLnRlc3QodHlwZSkgPyAxIDogMH1cIlxuICAgICAgIHRvcD1cIiR7L150b3AvaS50ZXN0KHR5cGUpID8gMSA6IDB9XCJcbiAgICAgICB2YWw9XCIke3ZhbHVlfVwiIC8+YDtcblxuY29uc3QgU1BSRUFEU0hFRVRfVkFMVUVfRklMVEVSID0gKHsgYmxhbmtzLCB2YWx1ZXMgfSkgPT5cbiAgYDxmaWx0ZXJzICR7YmxhbmtzID8gJ2JsYW5rPVwiMVwiJyA6ICcnfT5cbiAgICAke2ZvcmVhY2godmFsdWVzLCAodmFsdWUpID0+IGBcbiAgICAgIDxmaWx0ZXIgdmFsPVwiJHt2YWx1ZX1cIiAvPmApfVxuICA8L2ZpbHRlcnM+YDtcblxuZnVuY3Rpb24gc3ByZWFkc2hlZXRGaWx0ZXJzKGZpbHRlcikge1xuICAgIHJldHVybiBTUFJFQURTSEVFVF9GSUxURVJTKHtcbiAgICAgICAgcmVmOiBmaWx0ZXIucmVmLFxuICAgICAgICBjb2x1bW5zOiBmaWx0ZXIuY29sdW1ucyxcbiAgICAgICAgZ2VuZXJhdG9yczoge1xuICAgICAgICAgICAgY3VzdG9tICA6IFNQUkVBRFNIRUVUX0NVU1RPTV9GSUxURVIsXG4gICAgICAgICAgICBkeW5hbWljIDogU1BSRUFEU0hFRVRfRFlOQU1JQ19GSUxURVIsXG4gICAgICAgICAgICB0b3AgICAgIDogU1BSRUFEU0hFRVRfVE9QX0ZJTFRFUixcbiAgICAgICAgICAgIHZhbHVlICAgOiBTUFJFQURTSEVFVF9WQUxVRV9GSUxURVJcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5zcHJlYWRzaGVldEZpbHRlcnMuY3VzdG9tT3BlcmF0b3IgPSBmdW5jdGlvbihmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZXEgIDogXCJlcXVhbFwiLFxuICAgICAgICBndCAgOiBcImdyZWF0ZXJUaGFuXCIsXG4gICAgICAgIGd0ZSA6IFwiZ3JlYXRlclRoYW5PckVxdWFsXCIsXG4gICAgICAgIGx0ICA6IFwibGVzc1RoYW5cIixcbiAgICAgICAgbHRlIDogXCJsZXNzVGhhbk9yRXF1YWxcIixcbiAgICAgICAgbmUgIDogXCJub3RFcXVhbFwiLFxuXG4gICAgICAgIC8vIFRoZXNlIGFyZSBub3QgaW4gdGhlIHNwZWMsIGJ1dCBzZWVtcyB0byBiZSBob3cgRXhjZWwgZG9lc1xuICAgICAgICAvLyBpdCAoc2VlIGN1c3RvbVZhbHVlIGJlbG93KS4gIEZvciB0aGUgbm9uLW5lZ2F0ZWQgdmVyc2lvbnMsXG4gICAgICAgIC8vIHRoZSBvcGVyYXRvciBhdHRyaWJ1dGUgaXMgbWlzc2luZyBjb21wbGV0ZWx5LlxuICAgICAgICBkb2Vzbm90c3RhcnR3aXRoOiBcIm5vdEVxdWFsXCIsXG4gICAgICAgIGRvZXNub3RlbmR3aXRoOiBcIm5vdEVxdWFsXCIsXG4gICAgICAgIGRvZXNub3Rjb250YWluOiBcIm5vdEVxdWFsXCIsXG4gICAgICAgIGRvZXNub3RtYXRjaDogXCJub3RFcXVhbFwiXG4gICAgfVtmLm9wZXJhdG9yLnRvTG93ZXJDYXNlKCldO1xufTtcblxuc3ByZWFkc2hlZXRGaWx0ZXJzLmN1c3RvbVZhbHVlID0gZnVuY3Rpb24oZikge1xuICAgIGZ1bmN0aW9uIGVzYyhzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWyo/XSkvZywgXCJ+JDFcIik7XG4gICAgfVxuXG4gICAgc3dpdGNoIChmLm9wZXJhdG9yLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSBcInN0YXJ0c3dpdGhcIjpcbiAgICAgICAgY2FzZSBcImRvZXNub3RzdGFydHdpdGhcIjpcbiAgICAgICAgICAgIHJldHVybiBlc2MoZi52YWx1ZSkgKyBcIipcIjtcblxuICAgICAgICBjYXNlIFwiZW5kc3dpdGhcIjpcbiAgICAgICAgY2FzZSBcImRvZXNub3RlbmR3aXRoXCI6XG4gICAgICAgICAgICByZXR1cm4gXCIqXCIgKyBlc2MoZi52YWx1ZSk7XG5cbiAgICAgICAgY2FzZSBcImNvbnRhaW5zXCI6XG4gICAgICAgIGNhc2UgXCJkb2Vzbm90Y29udGFpblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiKlwiICsgZXNjKGYudmFsdWUpICsgXCIqXCI7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmLnZhbHVlO1xuICAgIH1cbn07XG5cbnNwcmVhZHNoZWV0RmlsdGVycy5keW5hbWljRmlsdGVyVHlwZSA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBxdWFydGVyMSAgOiBcIlExXCIsXG4gICAgICAgIHF1YXJ0ZXIyICA6IFwiUTJcIixcbiAgICAgICAgcXVhcnRlcjMgIDogXCJRM1wiLFxuICAgICAgICBxdWFydGVyNCAgOiBcIlE0XCIsXG4gICAgICAgIGphbnVhcnkgICA6IFwiTTFcIixcbiAgICAgICAgZmVicnVhcnkgIDogXCJNMlwiLFxuICAgICAgICBtYXJjaCAgICAgOiBcIk0zXCIsXG4gICAgICAgIGFwcmlsICAgICA6IFwiTTRcIixcbiAgICAgICAgbWF5ICAgICAgIDogXCJNNVwiLFxuICAgICAgICBqdW5lICAgICAgOiBcIk02XCIsXG4gICAgICAgIGp1bHkgICAgICA6IFwiTTdcIixcbiAgICAgICAgYXVndXN0ICAgIDogXCJNOFwiLFxuICAgICAgICBzZXB0ZW1iZXIgOiBcIk05XCIsXG4gICAgICAgIG9jdG9iZXIgICA6IFwiTTEwXCIsXG4gICAgICAgIG5vdmVtYmVyICA6IFwiTTExXCIsXG4gICAgICAgIGRlY2VtYmVyICA6IFwiTTEyXCJcbiAgICB9W3R5cGUudG9Mb3dlckNhc2UoKV0gfHwgdHlwZTtcbn07XG5cbmV4cG9ydCB7XG4gICAgV29ya2Jvb2ssXG4gICAgV29ya3NoZWV0XG59O1xuIl0sIm5hbWVzIjpbImxldCIsImNvbnN0IiwidGhpcyIsImN1cnJlbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUFBLElBQUksT0FBTyxHQUFHO0lBQ1YsT0FBTyxFQUFFLFNBQVMsUUFBUSxFQUFFO1FBQ3hCLE9BQU8sUUFBUSxDQUFDO0tBQ25CO0NBQ0osQ0FBQzs7QUFFRixJQUFNLGVBQWUsR0FBQzs7QUFBQSxnQkFDbEIsUUFBZSxzQkFBQyxrQkFBa0IsRUFBRTtJQUNwQyxPQUFXLEdBQUcsa0JBQWtCLENBQUM7Q0FDaEMsQ0FBQTs7QUFFTCxnQkFBSSxPQUFjLHFCQUFDLFFBQVEsRUFBRTtJQUN6QixPQUFXLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7Q0FDcEMsQ0FBQSxBQUdMOztBQ2hCQUMsSUFBTSxXQUFXLEdBQUcscURBQXFELENB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